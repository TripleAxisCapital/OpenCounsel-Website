<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ONX Pro Waitlist</title>
  <meta name="color-scheme" content="light dark">
  <style>
    :root{
      --bg: #ffffff;
      --ink: #0B0B0C;
      --muted: #6B7280;
      --radius: 32px;
      --fieldH: 70px;
      --ease: cubic-bezier(.2,.8,.2,1);
    }
    body{
      margin:0; background:var(--bg); color:var(--ink);
      font: 15px/1.45 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, system-ui;
      -webkit-font-smoothing: antialiased;
      display:flex; justify-content:center; align-items:center; height:100vh;
    }
    .wrap{ width:100%; max-width:640px; padding:0 20px; text-align:center; }

    header h1{ font-size:2.6rem; margin-bottom:1rem; }
    header p.sub{ color:var(--muted); margin-bottom:1.5rem; }

    .form-wrap{ width:100%; }
    .field-row{
      display:flex; align-items:center; 
      border-radius: var(--radius);
      box-shadow: 0 15px 40px rgba(0,0,0,.08);
      border:1px solid #E5E7EB;
      background:#fff;
      overflow:hidden;
    }
    .input{
      flex:1; border:none; outline:none; 
      font-size:16px; padding:0 18px;
      height:var(--fieldH); 
    }
    .input::placeholder{ color:#9CA3AF; }
    .send-btn{
      width:48px; height:48px;
      margin-right:10px;
      border-radius:50%;
      border:none; cursor:pointer;
      background:#0B0B0C; display:flex; 
      align-items:center; justify-content:center;
      transition:transform .25s var(--ease), background .25s var(--ease);
      position: relative;
      overflow: hidden;
    }
    .send-btn:hover{ background:#222; }
    .send-btn svg{ width:18px; height:18px; stroke:#fff; fill:none; stroke-width:2.5; }

    /* Interactive pulse */
    .send-btn:active{
      transform:scale(0.9);
    }
    .send-btn.animate {
      animation: pulse 0.5s var(--ease);
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.15); }
      100% { transform: scale(1); }
    }

    /* Fly-off animation */
    .fly-away {
      animation: fly 0.8s var(--ease) forwards;
    }
    @keyframes fly {
      0% { transform: translate(0,0) scale(1); opacity:1; }
      40% { transform: translate(20px,-10px) scale(1.1); opacity:1; }
      100% { transform: translate(150px,-120px) scale(0.6); opacity:0; }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <header>
      <h1>ONX Pro Waitlist</h1>
      <p class="sub">High-end, Apple-grade AI workspace. Be first to get access and early updates.</p>
    </header>

    <section class="form-wrap" aria-label="Waitlist signup">
      <iframe name="form-target" id="form-target" hidden></iframe>
      <form id="joinForm" method="POST" target="form-target" 
        action="https://script.google.com/macros/s/AKfycbzskuzONwUt11lttmENWPfNQxR6FCgStxNu0Ubcv4QOGwhnAYDo951srK7p8NOSIYo/exec" novalidate>
        
        <div class="field-row">
          <input class="input" id="email" name="email" type="email" 
                 placeholder="" autocomplete="email" required aria-required="true" />
          <button class="send-btn" type="submit" aria-label="Submit">
            <!-- Upward arrow (â†‘) -->
            <svg viewBox="0 0 24 24" id="arrow-icon">
              <line x1="12" y1="19" x2="12" y2="5"/>
              <polyline points="5 12 12 5 19 12"/>
            </svg>
          </button>
        </div>
      </form>
    </section>
  </main>

  <script>
    const input = document.getElementById('email');
    const form = document.getElementById('joinForm');
    const btn = document.querySelector('.send-btn');
    const arrow = document.getElementById('arrow-icon');

    // Initial placeholder typing
    const initText = "Enter your email to join the waitlist.";
    let i = 0;
    function typeWriterInit(){
      if(i < initText.length){
        input.setAttribute("placeholder", initText.substring(0, i+1));
        i++;
        setTimeout(typeWriterInit, 60);
      }
    }
    window.onload = typeWriterInit;

    form.addEventListener('submit', (e) => {
      const email = input.value.trim();
      if(!email || !/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(email)){
        e.preventDefault();
        alert("Please enter a valid email.");
        return;
      }

      // Pulse + fly-away animation
      btn.classList.add('animate');
      arrow.classList.add('fly-away');

      // After flight, reset arrow position
      setTimeout(() => {
        arrow.classList.remove('fly-away');
      }, 1000);

      // After submission, clear input + success typing
      setTimeout(() => {
        input.value = "";
        let msg = "You have now joined the ONX waitlist!";
        let j = 0;
        input.setAttribute("placeholder", "");
        function typeSuccess(){
          if(j < msg.length){
            input.setAttribute("placeholder", msg.substring(0, j+1));
            j++;
            setTimeout(typeSuccess, 50);
          }
        }
        typeSuccess();
      }, 600);
    });
  </script>
</body>
</html>
