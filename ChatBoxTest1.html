<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ONX — Morphing Chat Bar</title>
<style>
  :root{
    --bg:#fafafa; --ink:#0B0B0C; --muted:#6B7280; --line:#E7E9EE;
    --radius-pill:40px;       /* A state */
    --radius-card:20px;       /* C state */
    --h-compact:72px;         /* A state height */
    --h-expanded:84px;        /* C state height */
    --ease:cubic-bezier(.2,.8,.2,1);
  }
  html,body{height:100%} body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 ui-sans-serif,system-ui,Inter,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{display:grid;place-items:center;min-height:100%}

  /* ===== Base bar (A) ===== */
  .onx-bar{
    position:relative;
    width:min(980px,92vw);
    height:var(--h-compact);
    border-radius:var(--radius-pill);
    background:#fff;
    box-shadow:
      0 1px 0 #fff inset,
      0 10px 24px rgba(0,0,0,.06),
      0 2px 0 rgba(0,0,0,.03) inset;
    padding:0 16px 0 24px;
    display:flex; align-items:center; gap:12px;
    transition:
      border-radius .35s var(--ease),
      height .35s var(--ease),
      box-shadow .35s var(--ease),
      padding .35s var(--ease);
  }
  .onx-input{
    flex:1; border:0; outline:0; background:transparent;
    font-size:18px; color:var(--ink);
  }
  .onx-input::placeholder{color:#9aa1ab}
  /* Send button (always visible) */
  .send{
    width:52px;height:52px;border-radius:50%;border:0;cursor:pointer;
    background:#0B0B0C;color:#fff;display:grid;place-items:center;
    box-shadow:0 8px 20px rgba(0,0,0,.15);
    transition:transform .18s ease, background .2s ease;
  }
  .send:hover{transform:translateY(-1px) scale(1.03);background:#151617}
  .send svg{width:22px;height:22px;stroke:#fff;stroke-width:2;fill:none;stroke-linecap:round;stroke-linejoin:round}

  /* ===== Hidden utilities (for C) ===== */
  .util, .mode, .voice{
    opacity:0; transform:translateY(6px) scale(.98); pointer-events:none;
    transition:opacity .28s var(--ease), transform .28s var(--ease);
  }
  .util{
    width:44px;height:44px;border-radius:50%;border:1px solid var(--line);
    background:#fff; display:grid;place-items:center; cursor:pointer;
  }
  .util svg,.voice svg{width:20px;height:20px}
  .mode{
    border:1px solid var(--line); border-radius:999px; background:#fff;
    font:500 15px/1.2 inherit; color:var(--ink);
    padding:10px 14px; display:flex; align-items:center; gap:8px; cursor:pointer;
  }
  .mode .dot{width:8px;height:8px;border-radius:50%;background:#0B0B0C}
  .voice{
    width:44px;height:44px;border-radius:50%;border:1px solid var(--line);
    background:#fff; display:grid;place-items:center; cursor:pointer;
  }

  /* ===== Chips row (hidden initially) ===== */
  .chips{
    display:flex; gap:12px; flex-wrap:wrap;
    opacity:0; transform:translateY(8px);
    transition:opacity .28s var(--ease), transform .28s var(--ease);
    margin-top:16px; width:min(980px,92vw);
  }
  .chip{
    border:1px solid var(--line); border-radius:999px; background:#fff;
    padding:10px 14px; font:500 14px/1.2 inherit; color:#111; display:inline-flex; gap:8px; align-items:center;
  }
  .chip svg{width:16px;height:16px}

  /* ===== Expanded state (C) ===== */
  .onx-bar.expanded{
    height:var(--h-expanded);
    border-radius:var(--radius-card);
    box-shadow:
      0 1px 0 #fff inset,
      0 14px 34px rgba(0,0,0,.10),
      0 1px 0 rgba(0,0,0,.05) inset;
    padding:0 16px;
  }
  .onx-bar.expanded .util,
  .onx-bar.expanded .mode,
  .onx-bar.expanded .voice{
    opacity:1; transform:translateY(0) scale(1); pointer-events:auto;
  }
  .chips.show{opacity:1; transform:translateY(0)}
  /* nice focus ring */
  .onx-bar:focus-within{outline:3px solid rgba(0,0,0,.05)}
  /* responsive */
  @media (max-width:640px){
    .mode{display:none}
    .chips{gap:10px}
    .chip{padding:9px 12px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <!-- BAR -->
    <div class="onx-bar" id="onxBar">
      <!-- hidden until expanded -->
      <button class="util" id="btnAttach" aria-label="Attach">
        <!-- paperclip -->
        <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2">
          <path d="M21 12.5l-8.5 8.5a6 6 0 01-8.5-8.5L12 4a4 4 0 116 6l-9 9a2 2 0 11-3-3l8.5-8.5"/>
        </svg>
      </button>

      <input id="onxInput" class="onx-input" placeholder="Ask anything…" aria-label="Message ONX" />

      <button class="mode" id="modeBtn" aria-haspopup="listbox" aria-expanded="false">
        <span class="dot"></span> Expert ▾
      </button>

      <button class="voice" id="btnVoice" aria-label="Voice input">
        <!-- waveform -->
        <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2">
          <path d="M12 3v10M7 8v2M17 7v4M4 10v1M20 9v3M6 19h12"/>
        </svg>
      </button>

      <button class="send" id="sendBtn" aria-label="Send">
        <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
      </button>
    </div>

    <!-- CHIPS (appear in C state) -->
    <div class="chips" id="chips">
      <div class="chip"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v18M3 12h18"/></svg> DeepSearch</div>
      <div class="chip"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h16"/></svg> Latest News</div>
      <div class="chip"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3 7h7l-5.5 4 2 7-6.5-4.5L5 20l2-7L2 9h7z"/></svg> Create Images</div>
      <div class="chip"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="7" r="4"/><path d="M5 22c1.5-4 5-6 7-6s5.5 2 7 6"/></svg> Personas</div>
    </div>
  </div>

<script>
  const bar   = document.getElementById('onxBar');
  const input = document.getElementById('onxInput');
  const chips = document.getElementById('chips');

  // expand on focus or when user starts typing
  const expand = () => {
    if (!bar.classList.contains('expanded')) {
      bar.classList.add('expanded');
      // small delay so the bar morphs first, then chips appear
      setTimeout(() => chips.classList.add('show'), 140);
    }
  };
  const collapse = () => {
    bar.classList.remove('expanded');
    chips.classList.remove('show');
  };

  input.addEventListener('focus', expand);
  input.addEventListener('input', expand);

  // optional: collapse when input is cleared and bar loses focus
  bar.addEventListener('focusout', (e) => {
    // if nothing typed and focus left the bar, collapse
    setTimeout(() => {
      const activeInside = bar.contains(document.activeElement);
      if (!activeInside && !input.value.trim()) collapse();
    }, 0);
  });

  // demo send action (replace with your submit)
  document.getElementById('sendBtn').addEventListener('click', () => {
    expand();
    // …submit logic here…
  });
</script>
</body>
</html>
