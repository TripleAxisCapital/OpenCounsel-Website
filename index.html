<!-- Sync Successful -->

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>

  <!-- ───── OpenCounsel.ca (www): SEO + Favicon using logo1.svg ───── -->
<title>ONX</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="description" content="ONX is the fusion of the world’s smartest AI—engineered for precision and built without limits. It blurs the line toward true AGI with real-time knowledge, unified intelligence, and agentic workflows. Start free today and unlock your limitless potential.">
<link rel="canonical" href="https://www.opencounsel.ca/">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<link rel="sitemap" type="application/xml" href="https://www.opencounsel.ca/sitemap.xml">
<!-- Internationalization -->
<link rel="alternate" href="https://www.opencounsel.ca/" hreflang="x-default">
<link rel="alternate" href="https://www.opencounsel.ca/en/" hreflang="en">

<!-- Performance & UX -->
<link rel="preconnect" href="https://cdn.opencounsel.ca" crossorigin>
<link rel="dns-prefetch" href="//cdn.opencounsel.ca">
<link rel="preload" as="font" href="/fonts/InterVariable.woff2" type="font/woff2" crossorigin>
<link rel="preload" as="image" href="/images/og/opencounsel-hero.jpg" fetchpriority="high">
<!-- Preload local mask logo to ensure instant swap -->
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta name="theme-color" content="#0B1B2B">

<!-- Icons (use logo1.svg for favicon) -->
<link rel="icon" href="/Oicon.svg?v=20250927" type="image/svg+xml" sizes="any">



<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="ONX">
<meta property="og:title" content="The AI Workspace. Without Limits.">
<meta property="og:description" content="The AI Workspace. Without Limits.">
<meta property="og:url" content="https://www.opencounsel.ca/">
<meta property="og:image" content="https://www.opencounsel.ca/images/og/opencounsel-1200x630.jpg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<!-- Twitter / X -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@OpenCounselAI">
<meta name="twitter:title" content="ONX — The AI Workspace. Without Limits.">
<meta name="twitter:description" content="The AI Workspace. Without Limits.">
<meta name="twitter:image" content="https://www.opencounsel.ca/images/og/opencounsel-1200x630.jpg">

<!-- Structured Data (Organization/WebSite) — point logo to logo1.svg -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"Organization",
      "name":"ONX",
      "url":"https://www.opencounsel.ca/",
      "logo":"https://www.opencounsel.ca/icons/logo1.svg",
      "sameAs":[
        "https://x.com/OpenCounselAI",
        "https://www.linkedin.com/company/opencounsel",
        "https://github.com/opencounsel"
      ]
    },
    {
      "@type":"WebSite",
      "url":"https://www.opencounsel.ca/",
      "name":"ONX",
      "potentialAction":{
        "@type":"SearchAction",
        "target":"https://www.opencounsel.ca/search?q={query}",
        "query-input":"required name=query"
      }
    }
  ]
}
</script>
<!-- ─────────────────────────────────────────────────────────────── -->

<!-- Pretty URL (client-side mask) -->
<script>
  window.ONX = { base:"", slug:"Home", file:"/index.html" }; // ← change per page

  (function(L,C){try{
    var B=C.base||"", S="/"+(C.slug||"home"), F=C.file||"/index.html";
    var p=L.pathname.replace(/\/+$/,"");
    if(B && p.startsWith(B)) p=p.slice(B.length)||"/";
    if(p===F || p==="/") history.replaceState(null,"",B+S+L.search+L.hash);
  }catch(_){}})(location, window.ONX);
</script>

  <!-- iOS/Standalone (lets users hide Safari UI when launched from Home Screen) -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ONX">
  <!-- Optional icons/manifest (add these files to fully enable the standalone PWA look) -->
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#0B1B2B">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- Icons + Tailwind -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','ui-sans-serif','system-ui'] },
          colors: {
            oc: { ink:'#0A0D10', soft:'#F5F7F9', line:'#E7EDF2', accent:'#5B8CFF', lilac:'#E7E7FF' }
          },
          boxShadow: {
            card:'0 6px 30px rgba(16,24,40,0.08)',
            glow:'0 0 0 1px rgba(255,255,255,.06), 0 10px 30px rgba(16,24,40,.18)'
          }
        }
      }
    }
  </script>

  <style>
    /* ================================
       GLOBAL CONTROLS
       ================================ */
    :root {
      --pad-mobile-x: 24px;
      --pad-desktop-x: 32px;
      --hamburger-inset: 13px;
      /* Global header roundness */
      --header-radius: 28px;
      /* Header inner padding (per side, per breakpoint) */
      --header-pad-left-mobile: calc(var(--pad-mobile-x) + 12px);
      --header-pad-right-mobile: calc(var(--pad-mobile-x) + 12px);
      --header-pad-left-desktop: calc(var(--pad-desktop-x) + 16px);
      --header-pad-right-desktop: calc(var(--pad-desktop-x) + 16px);

      /* ==== Global Scroll-Blur Controls (content inside cards) ==== */
      --scroll-blur-start: 16px;
      --scroll-blur-end: 0px;
      --scroll-blur-duration: 1100ms; /* smoother */
      --scroll-blur-ease: cubic-bezier(.16,1,.3,1); /* Apple-y ease-out */
      --scroll-blur-opacity-start: .65;
      --scroll-blur-opacity-end: 1;
      --scroll-blur-translate: 8px;

      /* ==== Card backdrop blur controls (the glass card itself) ==== */
      --card-blur-start: 12px;
      --card-blur-end: 0px;
      --card-blur-duration: 900ms;
      --card-blur-ease: cubic-bezier(.16,1,.3,1);
    }

    /* Kill horizontal scroll without breaking sticky */
    html, body { max-width: 100%; overflow-x: clip !important; }
    @supports not (overflow-x: clip) { html, body { overflow-x: hidden !important; } }
    .section-clip { position: relative; overflow-x: clip; }

    .oc-container { padding-left: var(--pad-mobile-x); padding-right: var(--pad-mobile-x); }
    @media (min-width: 1024px) { .oc-container { padding-left: var(--pad-desktop-x); padding-right: var(--pad-desktop-x); } }
    ::selection{background:#5B8CFF;color:#fff}

    @media (prefers-reduced-motion: no-preference) {
      .reveal { opacity:0; transform: translateY(18px) scale(.98); transition: opacity .6s ease, transform .6s ease; }
      .reveal.in { opacity:1; transform: translateY(0) scale(1); }
      .tilt:hover{ transform: translateY(-2px) scale(1.01); }
      .tilt{ transition: transform .25s ease; }
    }

    @keyframes logoIntro { from { transform: translateY(6px) scale(.92); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }
    @keyframes gradientShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

    /* ========= PRIMITIVES ========= */
    .g-grad, .grad-anim{
      background: linear-gradient(var(--angle, 135deg), var(--from, #0B1B2Bcc), var(--via, #000000), var(--to, #0B1B2Bcc));
      background-size: 300% 300%; animation: gradientShift var(--speed, 16s) ease-in-out infinite; will-change: background-position;
    }
    .animated-gradient { background-size:300% 300%; animation:gradientShift 16s ease-in-out infinite; will-change:background-position; }
    @keyframes heroLogoReveal {
      0%   { opacity: 0; filter: blur(8px); transform: translateY(6px) scale(.985); }
      60%  { opacity: 1; filter: blur(1.5px); transform: translateY(0) scale(1.000); }
      100% { opacity: 1; filter: blur(0); transform: translateY(0) scale(1); }
    }

      /*background: linear-gradient(var(--angle,135deg), var(--from,#0B1B2B), var(--via,#0E6F5C) 50%, var(--to,#00CFFF) 100%);*/

    .grad-text{
      background: linear-gradient(var(--angle, 135deg), var(--from, #0B1B2Bcc), var(--via, #0E6F5Ccc), var(--to, #00CFFFcc));
      
      background-size: 300% 300%; animation: gradientShift var(--speed,16s) ease-in-out infinite;
      -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; color: transparent;
    }

  </style>

<style>
  :root{
    /* Set your defaults here */
    --pad-top-mobile: 80px;
    --pad-top-desktop: 112px;
  }

  /* Mobile first */
  .padTop{ padding-top: var(--pad-top-mobile, var(--pad-top, 0px)); }

  /* Desktop override */
  @media (min-width: 768px){
    .padTop{ padding-top: var(--pad-top-desktop, var(--pad-top, 0px)); }
  }
</style>

<link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">

</head>





<!--========================== BODY ========================== -->

<body class="bg-white text-oc-ink font-sans antialiased">

  <!-- Load the header component -->
  <script type="module" src="/assets/onx-header.js"></script>

  <!-- Place the header here -->
  <onx-header
    width-flat="75%"
    max-w="1200px"
    pad-flat-top="0rem"
    pad-flat-bottom="0rem"
    pad-float-top-mobile=".75rem"
    pad-float-bottom-mobile=".25rem"
    pad-float-top-desktop="1rem"
    pad-float-bottom-desktop=".25rem"
    threshold="8">

    <!-- Extra center nav links -->

    <!-- Extra right-side action -->
  </onx-header><!--=======================================================================START===============================================================================================-->
<!--======================================================================CHAT SECTION================================================================================================-->
<!-- ===== Full-screen Chat Hero (Apple-minimal) — centered bubble + background word stream ===== -->
<section id="chat-hero" aria-label="Chat hero">
  <style>
    /* ---------------- Design tokens ---------------- */
    #chat-hero{
      --bg:#ffffff;
      --ink:#0B0B0C;
      --muted:#77808d;
      --line:#E6E8EC;

      --radius:28px;                 /* bubble radius */
      --bubbleH:78px;                /* initial min bubble height (auto-updates via JS) */
      --maxW:940px;                  /* max bubble width */
      --screenPadX:20px;             /* bubble -> viewport side padding */
      --titleGap:28px;               /* space between title and bubble */

      /* Animation timings */
      --fade:360ms;                  /* fade-out duration for sentence swap */

      /* === Chat controls (mobile & desktop) === */
      /* Mobile (default) */
      --padX-m:16px;
      --padY-m:14px;
      --sendScale-m:.50;

      /* Desktop (>=768px) */
      --padX-d:20px;
      --padY-d:18px;
      --sendScale-d:.75;

      /* Base + active mappings */
      --padX:var(--padX-m);
      --padY:var(--padY-m);
      --sendBase:56px;
      --sendScale:var(--sendScale-m);
      --sendSize:calc(var(--sendBase) * var(--sendScale));
      --sendIconRatio:.3928571429;   /* 22/56 */

      --shadowA:0 1px 0 rgba(0,0,0,.04);
      --shadowB:0 18px 40px rgba(0,0,0,.06);

      /* Word stream colors */
      --c1:#3f6768;
      --c2:#57c7d9;

      /* Track length for floating words */
      --trail: 2vh;

      /* Travel distance upward */
      --rise: calc(125vh + (var(--trail) * 0.5));

      /* START OFF-SCREEN to avoid pop-ins */
      --startTop: 105%;

      /* Title legibility shield (no visible plate; adaptive glow) */
      --titleStroke: .35px;          /* micro stroke width */
      --titleGlow1: .70;             /* inner halo strength */
      --titleGlow2: .55;             /* mid halo */
      --titleGlow3: .35;             /* outer halo */

      /* Section edge fades (Apple-style blend) */
      --fadeH-bottom: 14vh;          /* bottom reveal fade height */
      --fadeH-top: 10vh;             /* top dissolve fade height */

      /* =============================
         DOWNLOAD BUTTON CONTROLS
         (edit these only)
         ============================= */
      /* Mobile defaults */
      --dlGap-m: 22px;               /* distance from bottom edge of chat bubble */
      --dlH-m:   46px;               /* button height */
      --dlPX-m:  22px;               /* horizontal padding */
      --dlFont-m: 15px;              /* font size */

      /* Desktop overrides (>=768px) */
      --dlGap-d: 26px;
      --dlH-d:   52px;
      --dlPX-d:  26px;
      --dlFont-d: 16px;

      /* Mappings (auto-switch with media query below) */
      --dlGap:  var(--dlGap-m);
      --dlH:    var(--dlH-m);
      --dlPX:   var(--dlPX-m);
      --dlFont: var(--dlFont-m);

      --dlRadius: 999px;             /* pill roundness */
      --dlSheenOpacity: .22;         /* intensity of sheen */
      --dlSheenSpeed: 3.2s;          /* sheen speed */
    }

    @media (min-width:768px){
      #chat-hero{
        --padX:var(--padX-d);
        --padY:var(--padY-d);
        --sendScale:var(--sendScale-d);
        --sendSize:calc(var(--sendBase) * var(--sendScale));
        --fadeH-bottom: 16vh;
        --fadeH-top: 12vh;

        /* bind desktop download controls */
        --dlGap:  var(--dlGap-d);
        --dlH:    var(--dlH-d);
        --dlPX:   var(--dlPX-d);
        --dlFont: var(--dlFont-d);
      }
    }

    /* --------------- Section layout --------------- */
    #chat-hero{
      position:relative;
      min-height: calc(100vh + var(--trail));
      min-height: calc(100svh + var(--trail));
      background:var(--bg);
      box-sizing:border-box;
      isolation:isolate;
      -webkit-tap-highlight-color: transparent;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Text",
                   "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji",
                   "Segoe UI Emoji";
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      color:var(--ink);
      overflow:hidden;
    }

    /* ---- Apple-style edge fades (above words, below UI) ---- */
    #chat-hero::before,
    #chat-hero::after{
      content:"";
      position:absolute;
      left:0; right:0;
      pointer-events:none;
      z-index:1;
    }
    #chat-hero::before{
      top:0; height:var(--fadeH-top);
      background:linear-gradient(to bottom, var(--bg) 0%, rgba(255,255,255,0) 100%);
    }
    #chat-hero::after{
      bottom:0; height:var(--fadeH-bottom);
      background:linear-gradient(to top, var(--bg) 0%, rgba(255,255,255,0) 100%);
    }

    /* ---------------- Background word stream ---------------- */
    #chat-hero .word-stream{
      position:absolute; inset:0; z-index:0; pointer-events:none; overflow:hidden;
    }
    #chat-hero .ws-word{
      position:absolute; left:50%; top:var(--startTop);
      transform:translate3d(-50%,0,0) scale(var(--scale,1));
      margin-left:var(--x,0%); opacity:0; will-change:transform,opacity;
      animation:ws-rise var(--dur,10s) cubic-bezier(.22,.61,.36,1) var(--delay,0s) forwards;
    }
    @keyframes ws-rise{
      0%   { opacity:0; transform:translate3d(calc(-50% + var(--x,0%)), 0, 0) scale(var(--scale,1)); }
      10%  { opacity:1; }
      100% { opacity:1; transform:translate3d(calc(-50% + var(--x,0%)), calc(var(--rise) * -1), 0) scale(var(--scale,1)); }
    }
    #chat-hero .ws-sway{ display:inline-block; will-change:transform; animation:ws-sway var(--swaydur,8s) ease-in-out var(--delay,0s) infinite alternate; }
    @keyframes ws-sway{ from{transform:translateX(0)} to{transform:translateX(var(--sway,3%))} }
    #chat-hero .ws-text{
      display:block; font-family: Inter, -apple-system, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      font-size:clamp(28px,8vw,72px); font-weight:500; letter-spacing:0.26em; line-height:1.15; text-transform:uppercase; white-space:nowrap;
      background:linear-gradient(120deg, var(--c1) 20%, var(--c2) 50%, var(--c1) 80%); background-size:220% 100%;
      -webkit-background-clip:text; background-clip:text; color:transparent;
      animation: ws-shimmer 8s ease-in-out infinite, ws-float 3.8s ease-in-out infinite alternate, ws-breathe 7s ease-in-out infinite;
      will-change:background-position, filter, transform; text-shadow:none;
    }
    @keyframes ws-shimmer{ 0%{background-position:0% 50%} 100%{background-position:200% 50%} }
    @keyframes ws-float  { from{transform:translateY(0)} to{transform:translateY(-2px)} }
    @keyframes ws-breathe{ 0%,100% { filter:brightness(1) saturate(1) } 50% { filter:brightness(1.06) saturate(1.03) } }

    /* ------------------ Foreground UI (above stream) --------------------- */
    #chat-hero .hero-title{ z-index:2; }
    #chat-hero .bubble-spot{ z-index:2; }

    /* ------------------ Title --------------------- */
    #chat-hero .hero-title{
      position:absolute;
      left:50%;
      top: calc(50vh - (var(--bubbleH) / 2) - var(--titleGap));
      transform: translate(-50%, -100%);
      margin:0; text-align:center; letter-spacing:-0.02em; line-height:1.1; font-weight:700;
      font-size:clamp(28px, 5.2vw, 54px); padding:0 12px;
    }
    /* Adaptive legibility shield */
    #chat-hero .hero-title .title-blur{
      -webkit-text-stroke: 0 transparent; text-shadow: none;
      filter: drop-shadow(0 0 10px rgba(255,255,255,.9)) drop-shadow(0 0 22px rgba(255,255,255,.6));
    }

    /* --------------- Bubble spot (center) ---------- */
    #chat-hero .bubble-spot{
      position:absolute; left:50%; top:50vh; transform:translate(-50%, -50%);
      width:min(calc(100vw - (var(--screenPadX)*2)), var(--maxW)); height:auto;
    }

    /* --------------- Chat bubble shell ------------- */
    #chat-hero .bubble{
      position:relative; width:100%; min-height:var(--bubbleH); height:auto; display:flex; align-items:center;
      border:1px solid var(--line); border-radius:var(--radius); background:#fff; box-shadow:var(--shadowA), var(--shadowB);
      padding-left:var(--padX); padding-right:calc(var(--padX) + var(--sendSize) + 14px); padding-top:var(--padY); padding-bottom:var(--padY);
      transition:box-shadow .15s ease; box-sizing:border-box;
    }
    #chat-hero .bubble:has(.prompt:focus-visible){ box-shadow:0 0 0 2px #DBE3FF inset, var(--shadowA), var(--shadowB); }

    /* ---------------- Multiline input ------------- */
    #chat-hero .prompt{
      flex:1 1 auto; display:block; width:100%; min-height:1.35em;
      font-size:clamp(16px, 2.2vw, 22px); line-height:1.35; color:#0b0b0c;
      border:0; background:transparent; outline:0; caret-color:#0b0b0c; resize:none; overflow:hidden; padding:0;
      white-space:pre-wrap; word-break:break-word; overflow-wrap:anywhere; -webkit-appearance:none; appearance:none;
      transition:opacity var(--fade) ease; opacity:1;
    }
    #chat-hero .prompt.is-fading{ opacity:0; }
    #chat-hero .prompt::placeholder{ color:var(--muted); opacity:.95; }

    /* ---------------- Scalable Send button ---------- */
    #chat-hero .send{
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      width:var(--sendSize); height:var(--sendSize);
      border-radius:999px; border:1px solid #0b0b0c; background:#0b0b0c; display:grid; place-items:center;
      cursor:pointer; transition:transform .15s ease, background-color .15s ease, box-shadow .15s ease, border-color .15s ease;
      box-shadow:0 2px 6px rgba(0,0,0,.10), 0 10px 24px rgba(0,0,0,.08); touch-action:manipulation; z-index:3;
    }
    #chat-hero .send:hover{ background:#121212; transform:translateY(calc(-50% - 1px)); }
    #chat-hero .send:active{ transform:translateY(-50%); }
    #chat-hero .send svg{ width:calc(var(--sendSize) * var(--sendIconRatio)); height:calc(var(--sendSize) * var(--sendIconRatio)); display:block; fill:none; stroke:#fff; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }

    /* ------------------ Reduced motion ------------------ */
    @media (prefers-reduced-motion: reduce){
      #chat-hero .send, #chat-hero .prompt{ transition:none; }
      #chat-hero .ws-word, #chat-hero .ws-sway, #chat-hero .ws-text{ animation:none !important; opacity:1 !important; transform:none !important; }
    }

    /* Audiowide, solid black (logo/title) */
    #chat-hero .hero-title .title-onx{
      font-family:"Audiowide", ui-sans-serif, system-ui, -apple-system, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial;
      font-weight:400; color:#0B0B0C; background:none; -webkit-background-clip:initial; background-clip:initial; animation:none;
    }

    /* === Subtitle styling === */
    #hero-onx-title .hero-subtitle{
      display:block; margin-top:.45em; line-height:1.25; letter-spacing:0.01em;
      max-width: 38ch; margin-left:auto; margin-right:auto; text-align:center; text-wrap:balance;
      font-family: "SF Pro Text", -apple-system, system-ui, "Segoe UI", Roboto, Arial, sans-serif;
      font-weight:500; font-size:clamp(16px, 1.6vw, 18px); color:#5B6572;
    }
    @media (min-width: 400px){
      #hero-onx-title .hero-subtitle{ max-width:50ch; }
    }

    /* =========================
       DOWNLOAD BUTTON STYLES
       ========================= */
    #chat-hero .download-spot{
      position:absolute;
      left:50%;
      /* position exactly below bubble: center (50vh) + half bubble height + gap */
      top: calc(50vh + (var(--bubbleH) / 2) + var(--dlGap));
      transform: translateX(-50%);
      width: max-content;
      z-index: 2;
    }

    #chat-hero .dl-btn{
      position: relative;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      height: var(--dlH);
      padding: 0 var(--dlPX);
      border-radius: var(--dlRadius);
      background: #0B0B0C;
      color: #fff;
      font-weight: 600;
      font-size: var(--dlFont);
      letter-spacing: .01em;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.08),
        0 6px 18px rgba(0,0,0,.18),
        0 2px 6px rgba(0,0,0,.10);
      -webkit-font-smoothing:antialiased;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease;
      outline: none;
    }
    #chat-hero .dl-btn:hover{
      transform: translateY(-1px);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.10),
        0 10px 28px rgba(0,0,0,.22),
        0 3px 8px rgba(0,0,0,.12);
    }
    #chat-hero .dl-btn:active{ transform: translateY(0); }

    /* Sheen (subtle Apple-style) */
    #chat-hero .dl-btn::after{
      content:"";
      position:absolute; inset:0;
      border-radius: inherit;
      /* very soft diagonal sheen sweep */
      background:
        linear-gradient(120deg,
          rgba(255,255,255,0) 0%,
          rgba(255,255,255,var(--dlSheenOpacity)) 12%,
          rgba(255,255,255,0) 26%) ;
      background-size: 200% 100%;
      mix-blend-mode: soft-light;
      pointer-events:none;
      animation: dl-sheen var(--dlSheenSpeed) linear infinite;
      opacity: .9;
    }
    @keyframes dl-sheen{
      0%   { background-position: -120% 0; }
      100% { background-position: 120% 0; }
    }

    #chat-hero .dl-ico{
      width: 1.15em; height: 1.15em; display: inline-block;
    }
    #chat-hero .dl-ico svg{ width:100%; height:100%; display:block; fill:#fff; }

    /* OS switching: show only the detected icon */
    #chat-hero .ico-mac, #chat-hero .ico-win{ display:none; }
    #chat-hero.os-mac  .ico-mac{ display:inline-block; }
    #chat-hero.os-win  .ico-win{ display:inline-block; }

    /* Button text */
    #chat-hero .dl-label{ display:inline-block; line-height:1; }
  </style>

  <!-- Background floating words (starts ONLY after user scrolls) -->
  <div
    class="word-stream"
    data-rate="900"
    data-dmin="9"
    data-dmax="14"
    data-band="12"
    data-lanes="5"
    data-gap="1000"
    data-max="28"
    aria-hidden="true">
    <script>
      (() => {
        const STREAM_WORDS = [
          "CODE","CREATE","PLAN","EXECUTE","DESIGN","PRODUCE","MASTER","RESEARCH","INTELLIGENCE","PASSIVE INCOME",
          "BUILD","LAUNCH","SHIP","SCALE","AUTOMATE","OPTIMIZE","MONETIZE","DEPLOY","ANALYZE","STRATEGIZE",
          "REDEFINE","ITERATE","POLISH","EXCEL","FOCUS","SIMPLIFY","ELEVATE","ACCELERATE","GROW","LIMITLESS","UNSTOPPABLE",
          "DOMINATE","DISRUPT","CONQUER","COMMAND","OUTPERFORM","WIN","AMPLIFY","ASCEND","LEVERAGE","CONVERT",
          "CLOSE","SECURE","TRANSFORM","EVOLVE","PROFIT","LEAD","PREVAIL","OWN","CAPTURE","INNOVATE"
        ];

        const host = document.currentScript.parentElement;
        const RATE   = +(host.dataset.rate  || 900);
        const DMIN   = +(host.dataset.dmin  || 9);
        const DMAX   = +(host.dataset.dmax  || 14);
        const BAND   = +(host.dataset.band  || 12);
        const LANES  = Math.max(1, +(host.dataset.lanes || 5));
        const LANE_GAP = +(host.dataset.gap || 1000);
        const MAXN   = +(host.dataset.max   || 28);

        const EARLY_COUNT = 6;
        const EARLY_GAP   = Math.max(220, RATE * 0.35);
        const EARLY_DUR_MULT = 0.72;
        const SEED_BURST  = 4;

        const laneOffsets = Array.from({length: LANES}, (_, i) => (LANES === 1) ? 0 : ((i/(LANES-1))*2 - 1) * BAND);
        const laneReadyAt = new Array(LANES).fill(0);

        const shuffle = a => { for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j]] } return a; };
        let queue = shuffle([...STREAM_WORDS]);

        function pickLane(now){
          const free = [];
          for (let i=0;i<LANES;i++) if (now >= laneReadyAt[i]) free.push(i);
          return free.length ? free[Math.floor(Math.random()*free.length)] : -1;
        }

        function spawn(opts = { seed:false, early:false }){
          const now  = performance.now();
          const lane = pickLane(now);
          if (lane < 0) return;

          if (queue.length === 0) queue = shuffle([...STREAM_WORDS]);
          const phrase = queue.pop();

          let dur  = DMIN + Math.random()*(DMAX - DMIN);
          if (opts.early) dur *= EARLY_DUR_MULT;

          const scale  = 0.96 + Math.random()*0.14;
          const laneX  = laneOffsets[lane];

          const laneSpan = (LANES === 1) ? (BAND*2) : (2*BAND)/(LANES-1);
          const swayMax  = Math.max(0.6, (laneSpan*0.38));
          const sway     = (Math.random()<.5?-1:1) * (0.6 + Math.random()*(swayMax - 0.6));
          const swayDur  = 6 + Math.random()*6;

          const outer = document.createElement('span');
          outer.className = 'ws-word';
          outer.style.setProperty('--dur',   dur.toFixed(2)+'s');
          outer.style.setProperty('--x',     laneX.toFixed(2)+'%');
          outer.style.setProperty('--scale', scale.toFixed(2));
          const delaySeconds = opts.seed ? 0 : (opts.early ? Math.random()*0.15 : Math.random()*0.6);
          outer.style.setProperty('--delay', delaySeconds.toFixed(2) + 's');

          const sw = document.createElement('span'); sw.className = 'ws-sway';
          sw.style.setProperty('--sway', ( (Math.random()<.5?-1:1) * (0.6 + Math.random()*3) ).toFixed(2)+'%' );
          sw.style.setProperty('--swaydur', (6 + Math.random()*6).toFixed(2)+'s');

          const t = document.createElement('span'); t.className = 'ws-text'; t.textContent = phrase;

          sw.appendChild(t); outer.appendChild(sw); host.appendChild(outer);

          const nodes = host.querySelectorAll('.ws-word'); if (nodes.length > MAXN) nodes[0]?.remove();
          laneReadyAt[lane] = now + LANE_GAP;
          outer.addEventListener('animationend', () => outer.remove(), {once:true});
        }

        let started = false, earlyLeft = EARLY_COUNT, timerId = null;
        function scheduleNext(delay){
          timerId = setTimeout(() => {
            const useEarly = earlyLeft > 0;
            spawn({ early:useEarly });
            if (useEarly) earlyLeft--;
            scheduleNext( (earlyLeft > 0) ? EARLY_GAP : RATE );
          }, delay);
        }

        function start(){
          if (started) return;
          started = true;
          for (let i=0; i<SEED_BURST; i++) spawn({ seed:true, early:true });
          scheduleNext(0);
        }

        window.addEventListener('wheel', start, {once:true, passive:true});
        window.addEventListener('scroll', start, {once:true, passive:true});
        window.addEventListener('touchmove', start, {once:true, passive:true});

        const obs = new MutationObserver(() => {
          if (!document.body.contains(host) && timerId){ clearTimeout(timerId); obs.disconnect(); }
        });
        obs.observe(document.body, {childList:true, subtree:true});
      })();
    </script>
  </div>

  <!-- Title -->
  <h1 class="hero-title" id="hero-onx-title">
    <span class="title-blur tipsy">
      <span class="fit-line tipsy">Your Unfair Advantage.</span>
    </span>
    <!-- Subtitle -->
    <span class="hero-subtitle tipsy">Superpowered, unified AI—research, design, and execute without limits.</span>

    <style>
      /* Keep existing mobile/desktop tweaks for title */
      #hero-onx-title .br-mobile { display: none; }
      @media (min-width:601px){
        #hero-onx-title{ --desktop-gap: 0.35em; }
        #hero-onx-title .title-onx{ display:inline-block; margin-right: var(--desktop-gap); }
      }
      @media (max-width:600px){
        #hero-onx-title .br-mobile { display: inline; }
        #hero-onx-title .title-onx{ margin-right: 0; }
      }
    </style>
  </h1>

  <style>
    /* Only affect this title on mobile */
    @media (max-width:600px){
      #hero-onx-title{
        --xpad: 60px; --ypad: 0px; --outer-top: 0px; --outer-bottom: 0px;
        margin: var(--outer-top) 0 var(--outer-bottom) !important;
      }
      #hero-onx-title .title-blur{
        display:block; width:100vw; padding: var(--ypad) var(--xpad); box-sizing:border-box; line-height:0;
      }
      #hero-onx-title .fit-line{
        display:block; white-space:nowrap; line-height:1.05; font-weight:700; font-size:120px; transform:none;
      }
    }
  </style>

  <script>
    /* Fit title on mobile and sync bubble height */
    (function(){
      const root  = document.getElementById('hero-onx-title');
      const line  = root?.querySelector('.fit-line');
      const shell = root?.querySelector('.title-blur');
      const mq    = window.matchMedia('(max-width: 600px)');
      const BASE  = 120;

      function fitOnce(){
        if(!root || !line || !shell) return;
        if(!mq.matches){ line.style.fontSize = ''; root.style.marginTop=''; return; }

        line.style.fontSize = BASE + 'px';
        const rectW = shell.getBoundingClientRect().width;
        const cs    = getComputedStyle(shell);
        const pad   = (parseFloat(cs.paddingLeft)||0) + (parseFloat(cs.paddingRight)||0);
        const available = Math.max(0, rectW - pad);
        const needed    = Math.max(1, line.scrollWidth);
        const scale     = Math.min(1, available / needed);
        line.style.fontSize = (BASE * scale) + 'px';

        const prev = root.previousElementSibling;
        if (prev){
          const gap = Math.round(root.getBoundingClientRect().top - prev.getBoundingClientRect().bottom);
          root.style.marginTop = (gap > 0 ? (-gap) : 0) + 'px';
        } else {
          root.style.marginTop = '0px';
        }
      }

      function fit(){ fitOnce(); requestAnimationFrame(fitOnce); }
      ['DOMContentLoaded','load','resize','orientationchange','pageshow'].forEach(ev=>{
        window.addEventListener(ev, fit, {passive:true});
      });
      if (document.fonts?.ready) document.fonts.ready.then(fit).catch(()=>{});
      fit();
    })();
  </script>

  <!-- The centered bubble -->
  <div class="bubble-spot">
    <form class="bubble" action="#" method="get" onsubmit="return false">
      <textarea
        class="prompt"
        id="prompt-input"
        rows="1"
        autocomplete="off"
        autocapitalize="off"
        autocorrect="off"
        spellcheck="false"
        aria-label="Ask something"
        placeholder="Tell me to build something legendary…"
      ></textarea>

      <button class="send" type="button" aria-label="Send">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 19V5M12 5l-6 6M12 5l6 6"/>
        </svg>
      </button>
    </form>
  </div>

  <!-- ===== Download button (below the bubble) ===== -->
  <div class="download-spot">
    <button class="dl-btn" type="button" id="onx-download"
      data-mac-url="/downloads/ONX-mac.dmg"
      data-win-url="/downloads/ONX-win.exe">
      <span class="dl-ico ico-mac" aria-hidden="true">
        <!-- Apple logo -->
        <svg viewBox="0 0 24 24"><path d="M16.365 13.246c.03 3.23 2.83 4.307 2.86 4.32-.023.074-.447 1.518-1.474 3-0.888 1.29-1.812 2.58-3.26 2.604-1.43.026-1.89-.84-3.52-.84-1.63 0-2.15.813-3.5.867-1.404.053-2.477-1.39-3.372-2.675-1.84-2.64-3.25-7.46-1.36-10.73.94-1.63 2.62-2.67 4.45-2.698 1.39-.027 2.71.93 3.52.93.81 0 2.43-1.15 4.11-0.98.7.03 2.66.28 3.92 2.11-.1.06-2.34 1.36-2.32 4.09zM13.9 3.6c.76-.92 1.27-2.2 1.13-3.49-1.09.044-2.41.72-3.2 1.64-.7.81-1.31 2.12-1.14 3.37 1.2.093 2.44-.61 3.21-1.52z"/></svg>
      </span>
      <span class="dl-ico ico-win" aria-hidden="true">
        <!-- Windows logo -->
        <svg viewBox="0 0 24 24"><path d="M2 3.5l9-1.3v9.1H2V3.5zm9 9.2v9.1l-9-1.3V12.7h9zM22 2v9.3h-9.5V3.3L22 2zm-9.5 10.7H22V22l-9.5-1.3v-8z"/></svg>
      </span>
      <span class="dl-label">Download</span>
    </button>
  </div>

  <script>
    /* ===== Hero type-in lines (edgy edition) ===== */
    const SUGGESTIONS = [
      "Design a ruthless—but legal—negotiation script that cuts supplier prices 25%.",
      "Turn $10k into $100k in 12 months: step-by-step arbitrage game plan.",
      "Find the fastest path to 1,000 paying users for an AI app—zero fluff.",
      "Reverse-engineer my top competitor’s funnel and out-convert them by 30%.",
      "Automate cold outreach that feels human—deliver 10 booked calls per day.",
      "Blueprint a content flywheel that prints $50k/month in inbound leads.",
      "Identify 3 undervalued micro-SaaS buys under $2M we can acquire now.",
      "Draft a no-BS investor memo that raises $1M with traction-light signals.",
      "Ship a viral ONX launch that hits #1 on Product Hunt within 48 hours.",
      "Audit pricing and add a premium tier that lifts ARPU by 40%."
    ];
    const TYPER = { startDelay:500, type:34, hold:1600, gap:650, loop:true };

    (function initTypewriter(){
      const input  = document.getElementById('prompt-input');
      const bubble = document.querySelector('#chat-hero .bubble');
      const hero   = document.getElementById('chat-hero');
      if (!input || !bubble || !hero) return;

      input.addEventListener('keydown', e => e.preventDefault());
      input.addEventListener('beforeinput', e => e.preventDefault());

      function autosize(){ input.style.height = 'auto'; input.style.height = input.scrollHeight + 'px'; }
      function syncBubbleH(){ hero.style.setProperty('--bubbleH', bubble.getBoundingClientRect().height + 'px'); }

      const ro = new ResizeObserver(syncBubbleH); ro.observe(bubble);

      const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduceMotion) { input.value = SUGGESTIONS[0] || ""; autosize(); syncBubbleH(); return; }

      let i = 0, j = 0;
      function typeNextChar(){
        const phrase = SUGGESTIONS[i] || "";
        input.classList.remove('is-fading');
        if (j < phrase.length){
          input.value += phrase[j++]; autosize(); syncBubbleH(); setTimeout(typeNextChar, TYPER.type);
        } else {
          setTimeout(() => fadeOutThenAdvance(), TYPER.hold);
        }
      }
      function fadeOutThenAdvance(){
        input.classList.add('is-fading');
        const onEnd = (e) => {
          if (e.propertyName && e.propertyName !== 'opacity') return;
          input.removeEventListener('transitionend', onEnd);
          input.value = ""; autosize(); syncBubbleH();
          i = (i + 1) % SUGGESTIONS.length; j = 0;
          setTimeout(typeNextChar, TYPER.gap);
        };
        input.addEventListener('transitionend', onEnd, { once:true });
        setTimeout(() => { if (input.classList.contains('is-fading')) input.dispatchEvent(new Event('transitionend')); }, 1000);
      }
      input.value = ""; autosize(); syncBubbleH(); setTimeout(typeNextChar, TYPER.startDelay);
      window.addEventListener('resize', () => { autosize(); syncBubbleH(); });
    })();

    /* ===== OS detection + button routing ===== */
    (function(){
      const host = document.getElementById('chat-hero');
      const btn  = document.getElementById('onx-download');
      if (!host || !btn) return;

      // very simple detection (good enough for icon swap)
      const ua = navigator.userAgent.toLowerCase();
      const isMac = ua.includes('mac os x') || ua.includes('macintosh') || ua.includes('mac');
      host.classList.add(isMac ? 'os-mac' : 'os-win');

      btn.addEventListener('click', () => {
        const mac = btn.getAttribute('data-mac-url') || '#';
        const win = btn.getAttribute('data-win-url') || '#';
        const url = isMac ? mac : win;
        // Navigate to the proper installer URL
        window.location.href = url;
      });
    })();
  </script>
</section>
<!--======================================================================================================================================================================-->
<!--=====================================================================CHAT END=================================================================================================-->


<!--=========================================================================SHOWCASE VIDEO SECTION=============================================================================================-->
<!-- HOW TO SIZE (pick one):
  A) Exact width with aspect:
     <div id="onx-card-reveal" style="--stage-w:1200px; --stage-aspect:16/9;">
  B) Exact width AND exact height (ignores aspect):
     <div id="onx-card-reveal" style="--stage-w:1200px; --stage-h:520px; --stage-aspect:auto;">
  C) Responsive max + viewport cap:
     <div id="onx-card-reveal" style="--stage-w:min(1280px,96vw); --stage-aspect:18/9;">
  Current config: height is 35% of viewport (with dvh precision on mobile).

  NEW: STAGE HEIGHT PER PLATFORM (overrides --stage-h when provided)
    data-stage-h-mobile="40dvh"         (examples: 40dvh, 35vh, 520px)
    data-stage-h-desktop="40vh"
-->
<div id="onx-card-reveal" class="padTop oc-container section-clip"
     data-speed="1.6"
     data-menu-scale="1.5"
     data-overshoot-x-enabled="false"
     data-overshoot-y-enabled="true"
     data-overshoot-x="1.5"
     data-overshoot-y="1.5"
     data-peak-x="0.58"
     data-peak-y="0.60"

     data-size-best-ai="2.2"
     data-size-logos="1.5"
     data-size-final-logo="2.5"
     data-size-menu-title="1.0"
     data-size-menu-sub="1.0"

     data-trigger-frac="0.75"

     data-stage-h-mobile="25svh"
     data-stage-h-desktop="50vh"

     role="img" aria-label="ONX brand animation"
     style="--stage-w:1200px; --stage-h:40vh; --stage-aspect:auto;"
>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700;800;900&family=Audiowide&display=swap" rel="stylesheet">

  <style>
    /* ---------- Structure / resets ---------- */
    #onx-card-reveal { max-width: 100%; margin: 0 auto; overflow: clip; }
    #onx-card-reveal * { box-sizing: border-box; }
    #onx-card-reveal, #onx-card-reveal * {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
    }

    /* Stage — controlled by CSS variables */
    #onx-stage{
      position: relative;
      width: var(--stage-w, min(1100px, 96vw));
      aspect-ratio: var(--stage-aspect, 16/9);   /* set to 'auto' if using explicit --stage-h */
      height: var(--stage-h, auto);              /* e.g., 35vh or 35dvh */
      max-width: 100%;
      margin: 0 auto;
      border-radius: var(--stage-radius, 32px);
      overflow: hidden;
      box-shadow: var(--stage-shadow, none);
      will-change: transform;
      transform-origin: center top;
      backface-visibility: hidden;
      contain: paint;
      user-select: none; -webkit-user-select: none; touch-action: manipulation;
    }
    #onx-stage canvas{ width: 100%; height: 100%; display: block; }

    /* Minimal controls — disabled */
    #onx-controls{
      display: none !important;   /* hide the bar */
      margin-top: 0 !important;   /* remove spacing */
    }
    #onx-controls button{ display: none !important; }

    @media (max-width: 640px){
      #onx-card-reveal{ overflow: clip; margin:24px auto 28px; }
      #onx-controls{ display: none !important; margin-top: 0 !important; }
    }
  </style>

  <!-- Stage -->
  <div id="onx-stage" class="g-grad grad-animi tipsy"><canvas id="onx-canvas"></canvas></div>

  <div id="onx-controls" aria-label="Animation controls"></div>
  <div id="onx-play" aria-hidden="true" style="display:none"></div>

  <script>
  (()=>{ 'use strict';

    /* ========================= GLOBAL SIZE CONTROLS ========================= */
    const SIZE = {
      all:        1.00,
      menu:       1.00,
      menuTitle:  1.0,
      menuSub:    1.0,
      padding:    1.00,
      cardWidth:  1.00,
      cardHeight: 1.00,
      logos:      1.50,
      bestAI:     1.0,
      O:          1.50,
      finalLogo:  4.00,
      unified:    1.50
    };

    const SLOGANS = ["The Best AI", "Built on the Best"];

    // ======== ASSETS ========
    const LOGOS = [
      { src: 'grokLogo.svg',   alt: 'Grok',   tint: '#ffffff' },
      { src: 'googleLogo.svg', alt: 'Google', tint: '#ffffff' },
      { src: 'metaLogo.svg',   alt: 'Meta',   tint: '#ffffff' },
      { src: 'OAILogo.png',    alt: 'OpenAI', tint: '#ffffff' },
    ];
    const FINAL_LOGO_SRC  = 'onxlogo.svg';
    const FINAL_LOGO_TINT = '#ffffff';

    function parseFloatLogosAttr(host){
      try{
        const raw = host.dataset.floatLogos || host.dataset.floatingLogos || host.dataset.logos;
        if (!raw) return null;
        const arr = JSON.parse(raw);
        if (Array.isArray(arr) && arr.length) return arr.map(x=>({src:x.src, tint:x.tint||'#fff'}));
      }catch(_){}
      return null;
    }

    // ===== ELEMENTS =====
    const host    = document.getElementById('onx-card-reveal');
    const stageEl = document.getElementById('onx-stage');
    const canvas  = document.getElementById('onx-canvas');
    const controlsEl = document.getElementById('onx-controls');
    if (!canvas) return;

    // ---------- NEW: PER-PLATFORM STAGE HEIGHT ----------
    const STAGE_H       = host.dataset.stageH;
    const STAGE_H_M     = host.dataset.stageHMobile;
    const STAGE_H_D     = host.dataset.stageHDesktop;

    // ----- SIZE overrides via data-size-* -----
    (function applySizeOverridesFromData(){
      const MAP = ["all","menu","menuTitle","menuSub","padding","cardWidth","cardHeight","logos","bestAI","O","finalLogo","unified"];
      for (const k of MAP){
        const dsKey = "size" + k.charAt(0).toUpperCase() + k.slice(1);
        if (host.dataset[dsKey] !== undefined){
          const v = parseFloat(host.dataset[dsKey]);
          if (Number.isFinite(v)) SIZE[k] = v;
        }
      }
    })();

    // ===== UTILS =====
    const isMobile = () => window.matchMedia('(max-width: 640px)').matches || ('ontouchstart' in window);
    const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const deviceMem = (navigator && 'deviceMemory' in navigator) ? (navigator.deviceMemory||8) : 8;
    const css = (el, name, fallback=null) => {
      const v = getComputedStyle(el).getPropertyValue(name).trim();
      return v || fallback;
    };
    const cssPx = (el, name, fallbackNum) => {
      const v = css(el, name, '');
      const n = parseFloat(v);
      return Number.isFinite(n) ? n : fallbackNum;
    };
    const vp = () => {
      const vv = window.visualViewport;
      if (vv) return { vw: Math.max(320, vv.width), vh: Math.max(320, vv.height), top: vv.offsetTop||0, bottom: (window.innerHeight - vv.height - (vv.offsetTop||0)) };
      return { vw: Math.max(320, window.innerWidth || 360), vh: Math.max(320, window.innerHeight || 640), top: 0, bottom: 0 };
    };

    // ===== OPTIONS =====
    const TEMPO = {
      baseSpeed: parseFloat(host.dataset.speed) || 1.6,
      get speed(){ return this.baseSpeed; },
      set speed(v){ this.baseSpeed = Math.max(0.5, Math.min(4, v)); },
      get menuScale(){ return parseFloat(host.dataset.menuScale) || 1.5; },
      get overshootXEnabled(){ return host.dataset.overshootXEnabled !== undefined ? ['1','true','on','yes'].includes(String(host.dataset.overshootXEnabled).toLowerCase().trim()) : false; },
      get overshootYEnabled(){ return host.dataset.overshootYEnabled !== undefined ? ['1','true','on','yes'].includes(String(host.dataset.overshootYEnabled).toLowerCase().trim()) : true; },
      get overshootX(){ return parseFloat(host.dataset.overshootX) || 1.5; },
      get overshootY(){ return parseFloat(host.dataset.overshootY) || 1.5; },
      get peakX(){ return parseFloat(host.dataset.peakX) || 0.58; },
      get peakY(){ return parseFloat(host.dataset.peakY) || 0.60; }
    };
    if (prefersReducedMotion){ TEMPO.speed = 3.5; }

    // ===== CANVAS / BACKING STORE =====
    let CONFIG = { w: 2048, h: 1152 };
    let dpr = 1;
    let stageScale = 1;
    let OVERSAMPLE = deviceMem <= 4 ? 1.25 : 1.5;

    const TINT_CACHE = new Map();
    function tintToTarget(img, color, wCSS, hCSS){
      const w = Math.max(1, Math.round(wCSS * dpr));
      const h = Math.max(1, Math.round(hCSS * dpr));
      const key = (img.src || img) + '|' + color + '|' + w + 'x' + h + '|dpr' + dpr;
      let off = TINT_CACHE.get(key);
      if (!off){
        off = document.createElement('canvas');
        off.width = w; off.height = h;
        const octx = off.getContext('2d', { alpha: true });
        octx.imageSmoothingEnabled = true;
        octx.imageSmoothingQuality = 'high';
        octx.clearRect(0,0,w,h);
        octx.drawImage(img, 0, 0, w, h);
        octx.globalCompositeOperation = 'source-in';
        octx.fillStyle = color || '#fff';
        octx.fillRect(0,0,w,h);
        octx.globalCompositeOperation = 'source-over';
        TINT_CACHE.set(key, off);
      }
      return off;
    }

    const ctx = canvas.getContext('2d', { alpha: true, desynchronized: true });
    if (!ctx) return;
    ctx.imageSmoothingEnabled = true; ctx.imageSmoothingQuality = 'high';

    function setBackingScale(force=false){
      const raw = window.devicePixelRatio || 1;
      const eff = Math.min(4, raw * stageScale * OVERSAMPLE);
      if (!force && Math.abs(eff - dpr) < 0.01) return;
      dpr = eff;
      TINT_CACHE.clear();
      canvas.width  = Math.max(1, Math.round(CONFIG.w * dpr));
      canvas.height = Math.max(1, Math.round(CONFIG.h * dpr));
      ctx.setTransform(1,0,0,1,0,0);
      ctx.scale(dpr, dpr);
      ctx.imageSmoothingEnabled = true; ctx.imageSmoothingQuality = 'high';
    }

    let BG_CANVAS = document.createElement('canvas');
    let BG_CTX = BG_CANVAS.getContext('2d');

    function syncBuffers(){
      BG_CANVAS.width = CONFIG.w; BG_CANVAS.height = CONFIG.h;
      BG_CTX = BG_CANVAS.getContext('2d');
      BG_CTX.clearRect(0,0,CONFIG.w,CONFIG.h);
    }

    function clearStage(){
      ctx.setTransform(1,0,0,1,0,0);
      ctx.clearRect(0,0,CONFIG.w * dpr, CONFIG.h * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }

    // ---------- Apply per-platform stage height ----------
    function applyStageHeight(){
      const hVal = isMobile()
        ? (STAGE_H_M || STAGE_H || css(stageEl, '--stage-h', ''))
        : (STAGE_H_D || STAGE_H || css(stageEl, '--stage-h', ''));
      if (hVal) {
        stageEl.style.setProperty('--stage-aspect', css(stageEl, '--stage-aspect', 'auto') || 'auto');
        stageEl.style.setProperty('--stage-h', hVal);
      }
    }

    function setConfigFromStage(){
      const rect = stageEl.getBoundingClientRect();
      const wCSS = Math.max(1, rect.width);
      const hCSS = Math.max(1, rect.height);
      const targetLogicalW = isMobile() ? 1152 : 2048;
      const aspect = wCSS / hCSS;
      const logicalH = Math.round(targetLogicalW / Math.max(0.1, aspect));
      CONFIG = { w: Math.round(targetLogicalW), h: logicalH };
      syncBuffers();
    }

    // ===== STYLE / SIZING =====
    const DESIGN = {
      padX: 26, padY: 26, rowGap: 18, subGap: 8,
      titleSize: 36, subSize: 20, titleWeight: 800, subWeight: 500,
      minW: 420, maxW: 820, stageMarginFallback: 56
    };
    const getMenuScale = () => isMobile() ? Math.min(TEMPO.menuScale, 1.25) : TEMPO.menuScale;

    let STAGE_MARGIN = DESIGN.stageMarginFallback;
    let STYLE = buildStyle();

    function buildStyle(){
      const SCALE = getMenuScale();
      const ALL  = SIZE.all;
      const PAD  = SIZE.padding;
      const MENU = SIZE.menu;

      STAGE_MARGIN = cssPx(host, '--stage-margin', DESIGN.stageMarginFallback);

      return {
        padX: Math.round(DESIGN.padX * SCALE * ALL * PAD),
        padY: Math.round(DESIGN.padY * SCALE * ALL * PAD),
        rowGap: Math.round(DESIGN.rowGap * SCALE * ALL * PAD),
        subGap: Math.max(2, Math.round(DESIGN.subGap * SCALE * ALL * PAD)),
        titleSize: DESIGN.titleSize * SCALE * ALL * MENU * SIZE.menuTitle,
        subSize: DESIGN.subSize * SCALE * ALL * MENU * SIZE.menuSub,
        titleWeight: DESIGN.titleWeight,
        subWeight: DESIGN.subWeight,
        minW: DESIGN.minW * ALL,
        maxW: DESIGN.maxW * ALL
      };
    }

    function computeLogoLineHeight(logoImgs){
      const pad = isMobile()? 24 : 36;
      const maxH = (isMobile()? 72 : 96) * SIZE.all * SIZE.logos;
      const minH = (isMobile()? 44 : 60) * SIZE.all * SIZE.logos;
      const sumAspect = logoImgs.reduce((s, img)=> s + (img.aspect || 1), 0);
      const fitH = ((CONFIG.w * 0.84) - pad*(logoImgs.length-1)) / Math.max(1, sumAspect);
      return Math.max(minH, Math.min(maxH, fitH));
    }

    const rows = [
      { title:'ONX FAST', sub:'Fastest for instant answers' },
      { title:'ONX',      sub:'Default model' },
      { title:'ONX PRO',  sub:'Advanced agentic capabilities' },
    ];

    const clamp=(v,lo=0,hi=1)=>Math.min(hi,Math.max(lo,v));
    const clampRange=(v,lo,hi)=>Math.min(hi,Math.max(lo,v));
    const lerp=(a,b,t)=>a+(b-a)*t;
    const easeOutCubic=t=>1-Math.pow(1-clamp(t,0,1),3);
    const easeInOutCubic=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;
    const easeOutQuint=t=>1-Math.pow(1-clamp(t,0,1),5);

    function boomerang(t, factor=1.08, peak=0.55){
      if (t <= 0) return 0;
      if (t >= 1) return 1;
      if (t < peak) return easeOutQuint(t/peak) * factor;
      const u = (t - peak) / (1 - peak);
      return 1 + (factor - 1) * (1 - easeOutQuint(u));
    }
    function setFont(weight,size,family='ui-sans-serif, -apple-system, BlinkMacSystemFont, "SF Pro Display", Inter, system-ui'){
      ctx.font = `${weight} ${size}px ${family}`;
      ctx.textRendering = 'optimizeLegibility';
    }
    function roundedRect(ctx,x,y,w,h,r){
      const rr=Math.min(r,w/2,h/2);
      const x1=Math.round(x)+0.5, y1=Math.round(y)+0.5, w1=Math.round(w), h1=Math.round(h);
      ctx.beginPath();
      ctx.moveTo(x1+rr,y1);
      ctx.arcTo(x1+w1,y1,x1+w1,y1+h1,rr);
      ctx.arcTo(x1+w1,y1+h1,x1,y1+h1,rr);
      ctx.arcTo(x1,y1+h1,x1,y1,rr);
      ctx.arcTo(x1,y1,x1+w1,y1,rr);
      ctx.closePath();
    }

    const BASE = { widthGrow: 0.65, rowPop: 0.42, rowPause: 0.30, holdA: 0.34, holdB: 0.50, morph: 0.95 };
    const S = v => v / TEMPO.speed;

    function measureFinalLayout(){
      let maxTextW = 0;
      setFont(800, STYLE.titleSize);
      rows.forEach(r=>{ maxTextW = Math.max(maxTextW, ctx.measureText(r.title).width); });
      setFont(500, STYLE.subSize);
      rows.forEach(r=>{ if (r.sub) maxTextW = Math.max(maxTextW, ctx.measureText(r.sub).width); });

      const contentW = Math.ceil(maxTextW);
      const cardW0 = Math.min(
        Math.max(contentW + STYLE.padX*2, STYLE.minW),
        Math.min(STYLE.maxW, CONFIG.w - 2*STAGE_MARGIN)
      );
      const cardW = clampRange(cardW0 * SIZE.cardWidth, STYLE.minW*0.6, CONFIG.w - 2*STAGE_MARGIN);

      const rowHeights = rows.map(r => STYLE.titleSize + (r.sub ? (STYLE.subGap + STYLE.subSize) : 0));
      const contentH = rowHeights.reduce((a,b)=>a+b,0) + STYLE.rowGap*(rows.length-1);
      const cardH0 = Math.ceil(contentH + STYLE.padY*2);
      const cardH = Math.min(Math.ceil(cardH0 * SIZE.cardHeight), CONFIG.h - 2*STAGE_MARGIN);

      const radius = Math.max(22, Math.min(36, Math.round(Math.min(cardW, cardH) * 0.08)));
      return { cardW, cardH, rowHeights, radius };
    }
    let layout = { cardW: 0, cardH: 0, rowHeights: [], radius: 24 };

    const seed = { w: 120, h: 80, r: 20 };

    const ROW_POP_DUR = S(BASE.rowPop);
    const ROW_PAUSE   = S(BASE.rowPause);
    const rowStartTimes = rows.map((_, i) => i * (ROW_POP_DUR + ROW_PAUSE));

    const MOBILE_SHADOW_SCALE = isMobile() ? 0.7 : 1.0;
    const MOBILE_BLUR_SCALE   = isMobile() ? 0.6 : 1.0;

    function controlHeight(){
      const ctrl = document.getElementById('onx-controls');
      return ctrl ? Math.max(0, ctrl.offsetHeight || 44) : 44;
    }
    function applyMobileScale(){
      // Mobile: disable live auto-fit (prevents squish on URL-bar scroll)
      if (isMobile()){
        stageEl.style.transform = '';
        stageEl.style.transformOrigin = 'center top';
        const prev = stageScale; stageScale = 1;
        setBackingScale(Math.abs(prev-1)>0.01);
        return;
      }
      // Desktop: keep 1:1
      stageEl.style.transform = '';
      stageEl.style.transformOrigin = 'center top';
      const prev = stageScale; stageScale = 1;
      setBackingScale(Math.abs(prev-1)>0.01);
      return;
    }

    // -------------------- Phase A: Card (models) --------------------
    function renderCard(t){
      clearStage(); ctx.drawImage(BG_CANVAS, 0, 0);

      const widthEnd = S(BASE.widthGrow);
      const tw = clamp(t / widthEnd);
      const widthScale  = TEMPO.overshootXEnabled ? boomerang(tw, TEMPO.overshootX, TEMPO.peakX) : easeInOutCubic(tw);
      const w = lerp(seed.w, layout.cardW, Math.min(widthScale, TEMPO.overshootXEnabled ? TEMPO.overshootX : 1));

      let contentVisibleH = 0, visibleRows = 0, poppingIndex = -1, poppingProgress = 0;
      for (let i=0; i<rows.length; i++){
        const local = (t - rowStartTimes[i]) / ROW_POP_DUR;
        if (local <= 0) break;
        visibleRows++;
        if (local < 1){
          poppingIndex = i;
          poppingProgress = clamp(local);
          const rowScale = boomerang(poppingProgress, 1.06, 0.55);
          contentVisibleH += layout.rowHeights[i] * rowScale;
        } else {
          contentVisibleH += layout.rowHeights[i];
        }
      }
      if (visibleRows > 1) contentVisibleH += STYLE.rowGap * (visibleRows - 1);

      let springY = 1;
      if (poppingIndex >= 0) springY = boomerang(poppingProgress, 1.04, 0.5);

      const h = Math.max(seed.h, Math.min(Math.ceil(contentVisibleH * springY + STYLE.padY*2), CONFIG.h - 2*STAGE_MARGIN));

      const growT = clamp((w - seed.w) / Math.max(1, layout.cardW - seed.w));
      const r = lerp(seed.r, layout.radius, easeOutCubic(growT));
      const x = (CONFIG.w - w)/2, y = (CONFIG.h - h)/2;

      ctx.shadowColor = `rgba(0,0,0,${lerp(.10,.17,growT)})`;
      ctx.shadowBlur = lerp(6, 24, growT) * MOBILE_SHADOW_SCALE;
      ctx.shadowOffsetY = lerp(6, 14, growT);
      ctx.fillStyle = '#ffffff';
      roundedRect(ctx, x, y, w, h, r); ctx.fill();
      ctx.shadowColor='transparent';
      ctx.lineWidth = 1; ctx.strokeStyle = 'rgba(0,0,0,0.06)'; ctx.stroke();

      ctx.save(); roundedRect(ctx, x, y, w, h, r); ctx.clip();
      const contentX = x + STYLE.padX;
      let cursorY = y + STYLE.padY;

      for (let i=0; i<rows.length; i++){
        const local = (t - rowStartTimes[i]) / ROW_POP_DUR;
        if (local <= 0) break;

        const pr = clamp(local);
        const a  = easeOutCubic(pr);
        const s  = 1 - (1 - boomerang(pr, 1.06, 0.55)) * 0.05;
        const dy = lerp(10, 0, a);
        const blurPx = (1 - a) * 1.2 * MOBILE_BLUR_SCALE;

        ctx.save();
        ctx.translate(Math.round(contentX), Math.round(cursorY + dy));
        ctx.scale(s, s);
        ctx.textAlign = 'left'; ctx.textBaseline = 'alphabetic';
        ctx.globalAlpha = a;
        if (blurPx > 0.05) ctx.filter = `blur(${blurPx}px)`;

        setFont(STYLE.titleWeight, STYLE.titleSize);
        ctx.fillStyle = '#0b0b10';
        ctx.fillText(rows[i].title, 0, STYLE.titleSize);

        if (rows[i].sub){
          setFont(STYLE.subWeight, STYLE.subSize);
          ctx.fillStyle = 'rgba(0,0,0,0.58)';
          ctx.fillText(rows[i].sub, 0, STYLE.titleSize + STYLE.subGap + STYLE.subSize);
        }
        ctx.filter = 'none'; ctx.globalAlpha = 1; ctx.restore();

        cursorY += layout.rowHeights[i] + STYLE.rowGap;
      }
      ctx.restore();

      const lastEnd = rowStartTimes[rows.length - 1] + ROW_POP_DUR;
      const total = lastEnd + S(BASE.holdA) + S(BASE.holdB);
      return { total, x, y, w, h, r };
    }

    // -------------------- Phase B --------------------
    function renderCardToBestAI(startBox, t, slogan){
      clearStage(); ctx.drawImage(BG_CANVAS, 0, 0);

      const out = easeInOutCubic(clamp(t));
      const inv = 1 - out;

      const w = lerp(startBox.w, startBox.w*0.9, out);
      const h = lerp(startBox.h, Math.max(100, startBox.h*0.6), out);
      const r = lerp(startBox.r, Math.min(startBox.r, h/2), out);
      const x = (CONFIG.w - w)/2, y = (CONFIG.h - h)/2;

      ctx.save();
      ctx.globalAlpha = Math.max(0, inv * 0.9);
      ctx.fillStyle = '#ffffff';
      ctx.shadowColor = `rgba(0,0,0,${0.08*inv})`;
      ctx.shadowBlur = 16 * inv * MOBILE_SHADOW_SCALE;
      ctx.shadowOffsetY = 12 * inv;
      roundedRect(ctx, x, y, w, h, r); ctx.fill();
      ctx.shadowColor = 'transparent'; ctx.restore();

      const scale = boomerang(t, 1.06, 0.55);
      const titleSize = Math.round( lerp(72, isMobile() ? 88 : 120, scale) * SIZE.all * SIZE.bestAI );
      setFont(900, titleSize, '"Inter", ui-sans-serif, system-ui');

      ctx.save();
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.translate(Math.round(CONFIG.w/2), Math.round(CONFIG.h/2));
      ctx.globalAlpha = easeOutCubic(clamp(t));
      ctx.fillStyle = '#ffffff';
      ctx.fillText(slogan, 0, 0);
      ctx.restore();
    }

    // -------------------- Phase C --------------------
    function renderBestAIToLogos(t, logoImgs, slogan){
      clearStage(); ctx.drawImage(BG_CANVAS, 0, 0);

      const titleOut = clamp((t-0.35)/0.30);
      const titleIn  = 1 - titleOut;
      const titleSize = Math.round( (isMobile() ? 88 : 120) * SIZE.all * SIZE.bestAI );
      setFont(900, titleSize, '"Inter", ui-sans-serif, system-ui');
      ctx.save();
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.fillStyle = `rgba(255,255,255,${titleIn})`;
      ctx.fillText(slogan, Math.round(CONFIG.w/2), Math.round(CONFIG.h/2));
      ctx.restore();

      const inT = easeOutCubic(clamp((t-0.1)/0.7));
      const lineY = Math.round(CONFIG.h/2 + lerp(60, 0, inT));
      const pad = isMobile()? 24 : 36;
      const logoH = computeLogoLineHeight(logoImgs);
      const totalW = logoImgs.reduce((acc,img,i)=> acc + logoH * (img.aspect||1) + (i?pad:0), 0);
      let x = (CONFIG.w - totalW)/2;

      const positions = [];
      logoImgs.forEach((img, i) => {
        const w = logoH * (img.aspect||1);
        const appear = clamp((inT - i*0.06)/0.8);
        const a = easeOutCubic(appear);
        const s = 0.92 + 0.08 * boomerang(appear, 1.06, 0.55);
        const y = lineY;

        ctx.save();
        ctx.globalAlpha = a;
        const cx = x + w/2, cy = y;
        ctx.translate(Math.round(cx), Math.round(cy));
        ctx.scale(s, s);

        const drawW = w * s, drawH = logoH * s;
        if (img.raw){
          const tinted = tintToTarget(img.raw, img.tint, drawW, drawH);
          ctx.drawImage(tinted, -w/2, -logoH/2, w, logoH);
        } else {
          ctx.fillStyle = '#e9ecf2';
          roundedRect(ctx, -w/2, -logoH/2, w, logoH, Math.min(logoH/2, 12)); ctx.fill();
        }

        ctx.restore();

        positions.push({ x: x + w/2, y, w, h: logoH });
        x += w + pad;
      });

      return positions;
    }

    // -------------------- Phase D --------------------
    function renderLogosIntoO(t, logoImgs, startPositions){
      clearStage(); ctx.drawImage(BG_CANVAS, 0, 0);

      const centerX = Math.round(CONFIG.w/2);
      const centerY = Math.round(CONFIG.h/2 - (isMobile()? 6 : 10));
      const baseSize = (isMobile()? 180 : 260) * SIZE.all * SIZE.O;
      const size = Math.round( lerp(baseSize*0.9, baseSize*1.04, boomerang(clamp(t), 1.04, 0.55)) );

      ctx.save();
      setFont(900, size, '"Audiowide", ui-sans-serif, system-ui');
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.shadowColor = 'rgba(0,0,0,0.12)';
      ctx.shadowBlur = 18 * (isMobile()? 0.7 : 1.0); ctx.shadowOffsetY = 10;
      ctx.fillStyle = '#ffffff';
      ctx.fillText('O', centerX, centerY);
      ctx.shadowColor = 'transparent';
      ctx.restore();

      const pull = easeInOutCubic(clamp(t));
      logoImgs.forEach((img, i) => {
        const p = startPositions[i]; if (!p) return;
        const delay = i * 0.06;
        const tt = clamp((pull - delay)/ (1 - delay));
        const a  = easeOutCubic(tt);

        const curX = lerp(p.x, centerX, a);
        const curY = lerp(p.y, centerY, a);
        const scale = 1 - 0.85*a;
        const opacity = 1 - a;

        const w = (p.w) * scale, h = (p.h) * scale;

        ctx.save();
        ctx.globalAlpha = Math.max(0, opacity);
        ctx.translate(Math.round(curX), Math.round(curY));

        if (img.raw){
          const tinted = tintToTarget(img.raw, img.tint, w, h);
          ctx.drawImage(tinted, -w/2, -h/2, w, h);
        } else {
          ctx.fillStyle = '#e9ecf2';
          roundedRect(ctx, -w/2, -h/2, w, h, Math.min(h/2, 12)); ctx.fill();
        }

        ctx.restore();
      });
    }

    // -------------------- Phase E --------------------
    function renderOToFinalLogo(t, finalLogoImg){
      clearStage(); ctx.drawImage(BG_CANVAS, 0, 0);

      const centerX = Math.round(CONFIG.w/2);
      const centerY = Math.round(CONFIG.h/2 - (isMobile()? 10 : 14));

      const oSizeBaseFrom = (isMobile()? 180 : 260) * SIZE.all * SIZE.O;
      const oSizeBaseTo   = (isMobile()? 130 : 180) * SIZE.all * SIZE.O;
      const oOut = clamp(1 - t);
      const logoIn = easeOutCubic(clamp(t));
      const oSize = Math.round(lerp(oSizeBaseFrom, oSizeBaseTo, 1 - oOut));
      ctx.save();
      setFont(900, oSize, '"Audiowide", ui-sans-serif, system-ui');
      ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
      ctx.globalAlpha = oOut;
      ctx.fillStyle = '#ffffff';
      ctx.fillText('O', centerX, centerY);
      ctx.restore();

      const bounceScale = 0.92 + 0.08*boomerang(logoIn, 1.04, 0.52);
      const baseTargetW = Math.min(CONFIG.w * (isMobile()? 0.36 : 0.34), isMobile()? 280 : 420)
                          * SIZE.all * SIZE.finalLogo;
      const w = baseTargetW * bounceScale;
      const aspect = Math.max(0.01, finalLogoImg.aspect || 1);
      const h = w / aspect;

      ctx.save();
      ctx.globalAlpha = logoIn;
      if (finalLogoImg.raw){
        const tinted = tintToTarget(finalLogoImg.raw, finalLogoImg.tint, w, h);
        ctx.drawImage(tinted, Math.round(centerX - w/2), Math.round(centerY - h/2),
                              Math.round(w), Math.round(h));
      } else {
        ctx.fillStyle = '#ffffff';
        ctx.beginPath(); ctx.arc(centerX, centerY, Math.round(w/2), 0, Math.PI*2); ctx.fill();
      }
      ctx.restore();

      const subT = clamp((t-0.18)/0.72);
      if (subT > 0){
        const a = easeOutCubic(subT);
        const lift = Math.round(lerp(14, 0, a));
        const blurPx = (1 - a) * (isMobile()? 2.2 : 3.2);
        const size = (isMobile()? 28 : 40) * SIZE.all * SIZE.unified;
        setFont(700, size, '"Inter", ui-sans-serif, system-ui');
        ctx.save();
        ctx.globalAlpha = a;
        ctx.textAlign = 'center'; ctx.textBaseline = 'top';
        if (blurPx > 0.05) ctx.filter = `blur(${blurPx}px)`;
        ctx.fillStyle = '#ffffff';
        ctx.fillText('Unified AI', centerX, Math.round(centerY + (h/2) + (isMobile()? 36 : 44) + lift));
        ctx.filter = 'none';
        ctx.restore();
      }
    }

    // =================== Orchestrator & Assets ===================
    let isAnimating = false;
    let runId = 0;
    let prepared = null;

    function loadImage(src){
      return new Promise(resolve=>{
        const img = new Image();
        img.crossOrigin = 'anonymous';
        img.onload = ()=>{
          const nw = img.naturalWidth || img.width || 1;
          const nh = img.naturalHeight || img.height || 1;
          resolve({ image: img, aspect: Math.max(0.01, nw / nh) });
        };
        img.onerror = ()=> resolve({ image: null, aspect: 1 });
        img.src = src;
      });
    }

    async function prepareAssets(){
      const override = parseFloatLogosAttr(host);
      const sourceList = override || LOGOS;

      const rawLogoImgs = await Promise.all(sourceList.map(l => loadImage(l.src)));
      const logoImgs = rawLogoImgs.map((r, i) => ({
        raw: r.image,
        aspect: r.aspect || 1,
        tint: (sourceList[i] && sourceList[i].tint) ? sourceList[i].tint : '#fff'
      }));
      logoImgs.forEach(v => { if (!isFinite(v.aspect) || v.aspect <= 0) v.aspect = 1; });

      const finalLogoRaw = await Promise.all([loadImage(FINAL_LOGO_SRC)]);
      const finalLogo = { raw: finalLogoRaw[0].image, aspect: finalLogoRaw[0].aspect || 1, tint: FINAL_LOGO_TINT };

      if (document.fonts && document.fonts.ready){ try { await document.fonts.ready; } catch {} }
      return { logoImgs, finalLogo };
    }

    function playSequence(assets){
      const myId = ++runId;
      isAnimating = true;
      const slogan = SLOGANS[Math.floor(Math.random()*SLOGANS.length)];

      const startA = performance.now();
      let cardBox = null;
      function stepA(now){
        if (myId !== runId) return;
        const tSec = (now - startA)/1000;
        const layoutA = renderCard(tSec);
        if (!cardBox) cardBox = { x: layoutA.x, y: layoutA.y, w: layoutA.w, h: layoutA.h, r: layoutA.r };
        if (tSec < layoutA.total){ requestAnimationFrame(stepA); }
        else { stepB(performance.now()); }
      }

      function stepB(){
        if (myId !== runId) return;
        const startB = performance.now();
        (function loopB(ts){
          if (myId !== runId) return;
          const t = clamp( ((ts - startB)/1000) / S(0.85) );
          renderCardToBestAI(cardBox, t, slogan);
          if (t < 1) requestAnimationFrame(loopB); else stepC(performance.now());
        })(startB);
      }

      function stepC(){
        if (myId !== runId) return;
        const startC = performance.now();
        let lastPositions = null;
        (function loopC(ts){
          if (myId !== runId) return;
          const tC = clamp( ((ts - startC)/1000) / S(1.35) );
          lastPositions = renderBestAIToLogos(tC, assets.logoImgs, slogan);
          if (tC < 1) requestAnimationFrame(loopC); else stepD(performance.now(), lastPositions);
        })(startC);
      }

      function stepD(_now, lastPositions){
        if (myId !== runId) return;
        const startD = performance.now();
        (function loopD(ts){
          if (myId !== runId) return;
          const tD = clamp( ((ts - startD)/1000) / S(1.55) );
          renderLogosIntoO(tD, assets.logoImgs, lastPositions);
          if (tD < 1) requestAnimationFrame(loopD); else stepE(performance.now());
        })(startD);
      }

      function stepE(){
        if (myId !== runId) return;
        const startE = performance.now();
        (function loopE(ts){
          if (myId !== runId) return;
          const tE = clamp( ((ts - startE)/1000) / S(1.15) );
          renderOToFinalLogo(tE, assets.finalLogo);
          if (tE < 1) requestAnimationFrame(loopE); else {
            isAnimating = false;
          }
        })(startE);
      }

      requestAnimationFrame(stepA);
    }

    // ---------- Controls ----------
    function ensureControls(){
      if (!controlsEl) return;
      controlsEl.innerHTML = '';
      const replay = document.createElement('button');
      replay.type = 'button'; replay.textContent = 'Replay';
      replay.addEventListener('click', async ()=>{
        replay.disabled = true;
        try {
          if (!prepared) prepared = await prepareAssets();
          playSequence(prepared);
        } finally { setTimeout(()=>{ replay.disabled = false; }, 400); }
      }, { passive: true });
      controlsEl.appendChild(replay);
    }

    // ---------- Init ----------
    function initialBuild(){
      applyStageHeight();
      setConfigFromStage();
      setBackingScale(true);
      STYLE = buildStyle();
      layout = measureFinalLayout();
      clearStage(); renderCard(0);
      ensureControls();
    }
    initialBuild();

    // Autoplay when visible
    let autoplayed = false;
    async function tryAutoplay(){
      if (autoplayed || isAnimating) return;

      const rect = stageEl.getBoundingClientRect();
      const vpH  = window.visualViewport ? window.visualViewport.height : window.innerHeight;

      const TRIGGER_FRAC = Math.max(0, Math.min(1, parseFloat(host.dataset.triggerFrac) || 0.70));
      const startLine = vpH * TRIGGER_FRAC;
      const visible   = (rect.top <= startLine && rect.bottom >= 0);
      if (!visible) return;

      autoplayed = true;
      if (!prepared) prepared = await prepareAssets();
      if (prefersReducedMotion){
        renderOToFinalLogo(1, prepared.finalLogo);
        isAnimating = false;
      } else {
        playSequence(prepared);
      }
    }

    try {
      const io = new IntersectionObserver((entries)=>{
        for (const e of entries){ if (e.isIntersecting) tryAutoplay(); }
      }, { root: null, threshold: 0.15 });
      io.observe(stageEl);
    } catch {}

    const playBtn = document.getElementById('onx-play');
    if (playBtn){ playBtn.addEventListener('click', async ()=>{
      if (!prepared) prepared = await prepareAssets();
      playSequence(prepared);
    }, { passive: true }); }

    function rebuildIfNeeded(){
      applyStageHeight();
      applyMobileScale();
      const before = `${CONFIG.w}x${CONFIG.h}`;
      setConfigFromStage();
      const after = `${CONFIG.w}x${CONFIG.h}`;
      if (before !== after){ setBackingScale(true); }

      STYLE = buildStyle();
      layout = measureFinalLayout();

      clearStage();
      if (!autoplayed) tryAutoplay();
      else if (!isAnimating) renderOToFinalLogo(1, prepared?.finalLogo || { raw:null, aspect:1, tint:'#fff' });

      ensureControls();
    }

    let rid = null;
    window.addEventListener('resize', ()=>{ cancelAnimationFrame(rid); rid = requestAnimationFrame(rebuildIfNeeded); }, { passive: true });

    if (window.visualViewport){
      window.visualViewport.addEventListener('resize', ()=>{ cancelAnimationFrame(rid); rid = requestAnimationFrame(rebuildIfNeeded); }, { passive: true });
      window.visualViewport.addEventListener('scroll', ()=>{ /* jitter guard */ }, { passive: true });
    }

    window.addEventListener('scroll', tryAutoplay, { passive: true });

  })();
  </script>
</div>
<!--======================================================================================================================================================================-->

<!-- ────────────────────────── Become Limitless (Minimal • Conversion-first) ────────────────────────── -->
<section id="oc-Models" class="padTop section-clip relative mx-auto max-w-[1200px] oc-container">
  <!-- Neutral canvas -->
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 -z-10">
    <div class="absolute inset-0 bg-white"></div>
  </div>

  <!-- Header -->
  <div class="w-full text-center">
    <h2
      class="text-oc-ink text-4xl md:text-6xl lg:text-7xl font-semibold tracking-tight grad-text"
      style="--from:#0B1B2Bcc; --via:#0E6F5Ccc; --to:#00CFFFcc; --speed:16s; --angle:135deg;"
    >
      Become Limitless
    </h2>
    <p class="mx-auto mt-4 max-w-[720px] text-[18px] md:text-[20px] leading-relaxed text-neutral-600">
      Start free. Upgrade when you’re ready.
    </p>
  </div>

  <!-- Plans -->
  <div class="mt-10 grid grid-cols-[repeat(auto-fit,minmax(280px,360px))] justify-center gap-5 md:gap-6 auto-rows-auto">
    <!-- PRO (Most popular) -->
    <article class="group oc-card oc-card--pro border border-neutral-900/40 bg-neutral-950 text-white p-6 md:p-7 flex flex-col relative" data-float>
      <span class="tag-popular">Join the waitlist</span>

      <h3 class="text-xl font-semibold tracking-tight">ONX PRO</h3>
      <p class="mt-3 text-sm leading-relaxed text-white/85"> Unified Intelligence. Deeper Knowledge. Limitless Tools.
      </p>

      <ul class="oc-list mt-5 text-sm text-white/90" role="list">
        <li>Cloud power when you need it</li>
        <li>Private databases for accuracy</li>
        <li>Uncensored. No artificial limits</li>
      </ul>

      <!-- CTA pinned to bottom -->
      <div class="mt-auto pt-6">
        <button
          id="ctaGetONXPro"
          type="button"
          aria-label="Get ONX PRO"
          class="w-full h-11 inline-flex items-center justify-center rounded-xl bg-white text-neutral-950 text-sm font-medium tracking-tight shadow-sm ring-1 ring-white/20 hover:bg-white/90 hover:shadow-md active:bg-white/95 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40 transition"
        >
          Subscribe
        </button>
      </div>
    </article>

    <!-- Free -->
    <article class="group oc-card bg-white border border-neutral-200 p-6 md:p-7 flex flex-col" data-float>
      <h3 class="text-xl font-semibold tracking-tight text-neutral-900">ONX</h3>
      <p class="mt-3 text-sm leading-relaxed text-neutral-700">
        Essential AI. Local-first. Always free.
      </p>

      <ul class="oc-list mt-5 text-sm text-neutral-800/90" role="list">
        <li>Local AI</li>
        <li>Limited cloud usage</li>
        <li>Essential tools and databases</li>
      </ul>

      <!-- CTA pinned to bottom -->
      <div class="mt-auto pt-6">
        <button
          id="ctaGetONX"
          type="button"
          aria-label="Download ONX"
          class="w-full h-11 inline-flex items-center justify-center rounded-xl bg-neutral-900 text-white text-sm font-medium tracking-tight shadow-sm ring-1 ring-black/10 hover:bg-neutral-800 hover:shadow-md active:bg-neutral-900/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-neutral-900/40 transition"
        >
          Download
        </button>
      </div>
    </article>
  </div>
</section>

<!-- ───────── Styles (scoped to #oc-Models) ───────── -->
<style>
  /* Animated gradient headline (kept, subtle) */
  #oc-Models .grad-text{
    background: linear-gradient(var(--angle,135deg), var(--from,#0B1B2B), var(--via,#0E6F5C) 50%, var(--to,#ffffffc2) 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    animation: ocGradient var(--speed,16s) ease-in-out infinite alternate;
  }

  
  @keyframes ocGradient{0%{filter:hue-rotate(0deg) saturate(105%)}100%{filter:hue-rotate(12deg) saturate(115%)}}

  /* Cards: minimal depth, no sheen */
  #oc-Models .oc-card{
    border-radius:16px;
    box-shadow:0 8px 24px rgba(0,0,0,.05), 0 1px 0 rgba(0,0,0,.03) inset;
    transition:transform .26s cubic-bezier(.2,.8,.2,1), box-shadow .26s cubic-bezier(.2,.8,.2,1), background-color .26s ease, border-color .26s ease;
    will-change:transform, box-shadow;
  }
  @media (hover:hover){
    #oc-Models .oc-card:hover{
      transform:translateY(-4px) scale(1.01);
      box-shadow:0 16px 40px rgba(0,0,0,.08), 0 1px 0 rgba(255,255,255,.06) inset;
    }
    #oc-Models .oc-card:active{
      transform:translateY(-1px) scale(.997);
      box-shadow:0 10px 28px rgba(0,0,0,.07), 0 1px 0 rgba(255,255,255,.05) inset;
    }
  }

  /* PRO: quiet black with subtle breathing (no “shine”) */
  #oc-Models .oc-card--pro{
    position:relative;
    overflow:hidden;
    box-shadow:0 16px 54px rgba(0,0,0,.30), 0 1px 0 rgba(255,255,255,.03) inset;
    background-image:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0) 20%);
  }
  /* breathing aura */
  #oc-Models .oc-card--pro::before{
    content:"";
    position:absolute; inset:-20%;
    background:radial-gradient(60% 60% at 70% 0%, rgba(255,255,255,.06), transparent 60%);
    opacity:.0; transform:scale(1);
    pointer-events:none;
  }
  @media (prefers-reduced-motion: no-preference){
    #oc-Models .oc-card--pro::before{
      animation: proBreath 6s ease-in-out infinite;
    }
  }
  @keyframes proBreath{0%,100%{opacity:.02; transform:scale(1)}50%{opacity:.06; transform:scale(1.02)}}

  /* Popular badge */
  #oc-Models .tag-popular{
    position:absolute; top:12px; right:12px;
    display:inline-flex; align-items:center; justify-content:center;
    padding:4px 10px; border-radius:999px;
    font-size:11px; font-weight:600; letter-spacing:.01em;
    background:rgba(255,255,255,.08); color:#fff; border:1px solid rgba(255,255,255,.18);
    backdrop-filter:saturate(140%) blur(6px);
  }

  /* Minimal list bullets (no icon libs) */
  #oc-Models .oc-list{display:grid; gap:.5rem;}
  #oc-Models .oc-list li{
    display:flex; align-items:flex-start; gap:.5rem; line-height:1.5;
    position:relative; padding-left:1rem;
  }
  #oc-Models .oc-list li::before{
    content:""; position:absolute; left:0; top:.55em;
    width:6px; height:6px; border-radius:999px; background:currentColor; opacity:.65;
  }

  /* Gentle idle float (Apple-like micro-motion) */
  #oc-Models .oc-card[data-float]{transform:translateZ(0)}
  @media (prefers-reduced-motion: no-preference){
    #oc-Models .oc-card[data-float]{animation:ocFloat 8s ease-in-out infinite}
    #oc-Models .oc-card[data-float]:nth-child(1){animation-delay:.6s}
    #oc-Models .oc-card[data-float]:nth-child(2){animation-delay:1.2s}
  }
  @keyframes ocFloat{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
</style>









<!-- ────────────────────────── Brand Strip Section───────────────────────────────────── -->
<section class="padTop oc-brand-strip mx-auto max-w-[1200px] px-6">
  <!-- Microcopy -->
  <p class="mb-6 text-center text-[11px] leading-none tracking-[.24em] uppercase
             text-neutral-600 dark:text-white/60">
    Built on the platforms you trust
  </p>

  <!-- Logos row -->
  <ul class="grid grid-cols-4 items-center justify-items-center gap-10 md:gap-12"
      aria-label="Technology foundations">
    <li>
      <img data-oc-brand="google" alt="Google"
           class="h-10 md:h-12 lg:h-14 w-auto object-contain
                  opacity-0 transition-opacity duration-500
                  filter grayscale contrast-125 brightness-95
                  hover:grayscale-0 hover:brightness-100"
      />
    </li>

    <li>
      <img data-oc-brand="grok" alt="Grok"
           class="h-10 md:h-12 lg:h-14 w-auto object-contain
                  opacity-0 transition-opacity duration-500
                  filter grayscale contrast-125 brightness-95
                  hover:grayscale-0 hover:brightness-100"
      />
    </li>

    <li>
      <img data-oc-brand="meta" alt="Meta"
           class="h-10 md:h-12 lg:h-14 w-auto object-contain
                  opacity-0 transition-opacity duration-500
                  filter grayscale contrast-125 brightness-95
                  hover:grayscale-0 hover:brightness-100"
      />
    </li>

    <li>
      <img data-oc-brand="openai" alt="OpenAI"
           class="h-10 md:h-12 lg:h-14 w-auto object-contain
                  opacity-0 transition-opacity duration-500
                  filter grayscale contrast-125 brightness-95
                  hover:grayscale-0 hover:brightness-100"
      />
    </li>

  </ul>
</section>

<!-- Optional tiny loader (auto-wires [data-oc-brand] if no src is set) -->
<script>
(() => {
  const srcMap = {
    google: '/assets/brands/google.svg',
    openai: '/assets/brands/openai.svg',
    meta: '/assets/brands/meta.svg',
    grok: '/assets/brands/grok.svg'
  };

  document.querySelectorAll('img[data-oc-brand]').forEach(img => {
    const key = (img.getAttribute('data-oc-brand') || '').toLowerCase();
    const ensureFadeIn = () => requestAnimationFrame(() => img.style.opacity = '0.9');

    // Set src if missing
    if (!img.getAttribute('src') && srcMap[key]) img.src = srcMap[key];

    // Fade in once loaded
    if (img.complete) ensureFadeIn();
    else img.addEventListener('load', ensureFadeIn, { once: true });
  });
})();
</script>

<!-- Centered animated logo 
  <div class="mx-auto my-0 md:my-0 flex items-center justify-center">
    <span class="logo-anim LargeAniLogo" aria-label="ONX" style="--logo-size: clamp(56px, 30vw, 500px);"></span>
  </div> -->

 <!-- ────────────────────────── Download CTA Section───────────────────────────────────── -->
  <section id="download" class="padTop section-clip mx-auto max-w-[1200px] oc-container reveal">
    <div class="scroll-fade g-grad grad-anim rounded-3xl overflow-hidden border border-oc-line">
      <div class="p-8 md:p-12 flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-2xl md:text-3xl font-semibold text-white">Get ONX</h2>
          <p class="mt-2 text-white/80 max-w-xl">Limitless AI for everything.</p>
        </div>
        <div class="flex flex-wrap items-center gap-3">
          <a href="download.html" class="btn inline-flex items-center gap-2 rounded-xl bg-white text-oc-ink px-4 py-2 font-medium hover:bg-gray-100 focus:ring-2 focus:ring-white/50"><i class="ph ph-apple-logo"></i> Download for macOS</a>
          <a href="download.html" class="btn inline-flex items-center gap-2 rounded-xl border border-white/30 bg-white/10 text-white px-4 py-2 font-medium hover:bg-white/20 focus:ring-2 focus:ring-white/40"><i class="ph ph-windows-logo"></i> Download for Windows</a>
        </div>
      </div>
    </div>
  </section>

  

<!-- ────────────────────────── Footer Section───────────────────────────────────── -->
  <footer>
    <div class="padTop mx-auto max-w-[1200px] oc-container py-12 flex items-center flex-col gap-6 text-oc-ink/60 text-sm">
      <div class="text-center">
        <span class="font-semibold text-black">ONX</span> © <span id="yr"></span> ONX
      </div>
      <div class="flex items-center gap-4">
        <a class="hover:text-oc-ink" href="contact.html">Contact</a>
        <a class="hover:text-oc-ink" href="privacy.html">Privacy</a>
        <a class="hover:text-oc-ink" href="terms.html">Terms</a>
        <a class="hover:text-oc-ink" href="download.html">Download</a>
      </div>
    </div>
  </footer>

  
  <script>
   

    // ================================
    // BRAND LOGO PATHS (global, easy to swap)
    // ================================
    window.OC_BRANDS = Object.assign({
      openai: 'OAILogo.png',
      google: 'googleLogo.svg',
      meta:   'metaLogo.svg',
      grok:   'grokLogo.svg'
    }, window.OC_BRANDS || {});

    // ================================
    // HERO TYPE-IN GLOBALS
    // ================================
    window.OC_HERO = Object.assign({
      enabled: true,
      startOnView: true,
      waitForBlur: true,
      startDelayMs: 200,
      staggerMs: 50,
      streamSpeed: 1.0,
      titleCharMin: 60,
      titleCharMax: 60,
      // Title delete timing (for reverse-typing out the brand before logo swap)
      titleDeleteMin: 20,
      titleDeleteMax: 30,
      titleDwellMs: 500,
      // Slower for "Your Counsel.", normal for "For "
      line1CharMin: 44,
      line1CharMax: 50,
      line2CharMin: 18,
      line2CharMax: 22,
      // Fallbacks for other sections using generic line speeds
      lineCharMin: 18,
      lineCharMax: 22,
      buttonCharMin: 5,
      buttonCharMax: 10
    }, window.OC_HERO || {});

    // ================================
    // HERO LOGO GLOW (global toggle)
    // ================================
    window.OC_HERO_GLOW = Object.assign({
      enabled: !!window.OC_ENABLE_HERO_LOGO_GLOW, // single switch at top
      pulse: true,             // enable subtle breathing pulse
      pulseDur: '6s',          // pulse duration
      color1: 'rgba(0,207,255,.40)', // primary glow
      color2: 'rgba(14,111,92,.28)', // secondary glow
      opacity: 0.55,           // target opacity after reveal
      blurPx: 30,              // blur radius in px
      insetPct: 16             // how far glow extends beyond logo (% of size)
    }, window.OC_HERO_GLOW || {});

    // ================================
    // NEW: HERO ROTATING WORD CONFIG (easy knobs + caret controls + mobile split)
    // ================================
    window.OC_HERO_ROTATOR = Object.assign({
      /* Desktop single-line prefix */
      prefix: 'For ',

      /* Mobile split behavior */
      mobileSplit: true,          // ← set to false to keep single line on mobile
      mobileBreakpoint: 768,      // ← Tailwind md breakpoint

      /* Mobile line texts (used only when mobileSplit === true) */
      prefixLine1: 'Your AI.',  // static top line on mobile
      prefixLine2: 'For ',           // second-line static prefix before rotating word

      /*words: [
        'everything.',
        'entrepreneurs.',
        'students.',
        'inventors.',
        'lawyers.',
        'designers.',
        'business owners.'
      ],*/

      words: [
  'everything',
  'entrepreneurs',
  'research',
  'students',
  'product R&D',
  'business',
  'law',
  'inventors',
  'designers',
  'creators',
  'developers',
  'entrepreneurs',
  'innovation'
],



      dwellMs: 2000,          // wait after a word is fully typed
      typeMin: 50,            // typing speed range (ms/char)
      typeMax: 70,
      deleteMin: 20,          // backspace speed range (ms/char)
      deleteMax: 30,

      // Caret controls (CSS variables injected on the container)
      caretBlinkMs: 800,                 // slightly faster, smoother blink
      caretWidthPx: 2,                   // border width in px
      caretColor: 'rgba(255,255,255,.92)'// caret color
    }, window.OC_HERO_ROTATOR || {});

    // ================================
    // SECTION TYPE-IN GLOBALS
    // ================================
    window.OC_SLY = Object.assign({
      enabled: true,
      startOnView: true,
      startDelayMs: 0,
      staggerMs: 0,
      streamSpeed: 1.0,
      titleCharMin: 30,
      titleCharMax: 30,
      lineCharMin: 10,
      lineCharMax: 10
    }, window.OC_SLY || {});

    window.OC_TCT = Object.assign({
      enabled: true,
      startOnView: true,
      startDelayMs: 0,
      staggerMs: 0,
      streamSpeed: 1.0,
      titleCharMin: 30,
      titleCharMax: 30,
      lineCharMin: 10,
      lineCharMax: 10
    }, window.OC_TCT || {});

    

    // Year
    const yr = document.getElementById('yr');
    if (yr) yr.textContent = new Date().getFullYear();

    // Scroll reveal (one-shot)
    const io = new IntersectionObserver((entries)=>{
      for (const e of entries) {
        if (e.isIntersecting) { e.target.classList.add('in'); io.unobserve(e.target); }
      }
    },{threshold:.12});
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // ===== MOBILE SLIDE-IN MENU =====
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const mobileMenu   = document.getElementById('mobileMenu');
    const closeMenuBtn = document.getElementById('closeMenuBtn');

    function openMenu() {
      if (window.matchMedia('(min-width: 768px)').matches) return;
      mobileMenu.style.display = 'block'; void mobileMenu.offsetWidth;
      mobileMenu.classList.add('active'); hamburgerBtn.classList.add('is-active');
      hamburgerBtn.setAttribute('aria-expanded', 'true'); mobileMenu.setAttribute('aria-hidden','false');
      document.body.classList.add('overflow-hidden');
    }
    function closeMenu() {
      mobileMenu.classList.remove('active'); hamburgerBtn.classList.remove('is-active');
      hamburgerBtn.setAttribute('aria-expanded', 'false'); mobileMenu.setAttribute('aria-hidden','true');
      document.body.classList.remove('overflow-hidden');
      setTimeout(()=>{ if(!mobileMenu.classList.contains('active')) mobileMenu.style.display = 'none'; }, 550);
    }

    hamburgerBtn?.addEventListener('click', ()=> mobileMenu.classList.contains('active') ? closeMenu() : openMenu());
    closeMenuBtn?.addEventListener('click', closeMenu);
    mobileMenu?.addEventListener('click', (e)=>{ if (e.target.classList.contains('menu-scrim')) closeMenu(); });

    const mq = window.matchMedia('(min-width: 768px)');
    function handleMQ(e){ if (e.matches) closeMenu(); }
    if (mq.addEventListener) mq.addEventListener('change', handleMQ); else mq.addListener(handleMQ);

    document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeMenu(); });

    window.addEventListener('load', () => {
      const pageBlur = document.getElementById('pageBlur');
      if (!pageBlur) return;
      pageBlur.classList.add('hide');
      document.dispatchEvent(new Event('oc:page-blur-fade'));
      setTimeout(() => pageBlur.remove(), 1300);
    });

    // ================================
    // BLUR-ON-SCROLL OBSERVER (ONE-SHOT, PERSISTS UNTIL REFRESH)
    // ================================
    const sbo = new IntersectionObserver((entries) => {
      for (const e of entries) {
        if (e.isIntersecting) {
          e.target.classList.add('in-view');
          sbo.unobserve(e.target);
        }
      }
    }, { threshold: 0.35, rootMargin: "-12% 0px -12% 0px" });
    document.querySelectorAll('.scroll-fade').forEach(el => sbo.observe(el));

    // ===== Helpers =====
  
    function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }

    // Typewriter for plain text into an element
    function typewriter(el, text, min=10, max=18){
      return new Promise((resolve)=>{
        let i = 0;
        el.textContent = '';
        const tn = document.createTextNode('');
        el.appendChild(tn);
        (function tick(){
          tn.textContent = text.slice(0, i++);
          if (i <= text.length) setTimeout(tick, sp(rand(min,max)));
          else resolve();
        })();
      });
    }

    // Stream HTML with structure preserved (safe DOM walk; types text nodes char-by-char)
    async function streamHTML(el, html, charMin=10, charMax=18){
      const container = document.createElement('div');
      container.innerHTML = html.trim();

      async function walk(srcNode, dstParent){
        const children = Array.from(srcNode.childNodes);
        for (const child of children){
          if (child.nodeType === Node.TEXT_NODE){
            const text = child.textContent || '';
            await new Promise(res=>{
              let i=0;
              const tn = document.createTextNode('');
              dstParent.appendChild(tn);
              (function tick(){
                tn.textContent = text.slice(0, i++);
                if (i <= text.length) setTimeout(tick, sp(rand(charMin,charMax)));
                else res();
              })();
            });
          } else if (child.nodeType === Node.ELEMENT_NODE){
            const clone = child.cloneNode(false);
            dstParent.appendChild(clone);
            await walk(child, clone);
          }
        }
      }
      el.innerHTML = '';
      await walk(container, el);
    }

    // ================================
    // HERO: Show logo immediately, then type refined single-line tagline
    // ================================
    (function heroTyping(){
      const cfg = window.OC_HERO || {};
      if (!cfg.enabled) return;

      const hero = document.getElementById('home');
      if (!hero) return;

      const titleEl = hero.querySelector('.hero-title');
      const sub1El  = hero.querySelector('.hero-sub1');
      const ctaTxt  = hero.querySelector('.hero-cta-text');
      const ctaBtn  = hero.querySelector('#heroCtaBtn');

      if (!titleEl || !ctaTxt || !ctaBtn) return;

      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const bTxt  = ctaTxt.textContent || '';

      // Refined Apple-style tagline (single line)
      const TAG1_BEFORE = '';
      const TAG1_BOLD   = '';
      const TAG1_AFTER  = '  AI Without Limits';
      const TAGLINE_FULL = TAG1_BEFORE + TAG1_BOLD + TAG1_AFTER;
      // Mobile split lines as requested
      const MOBILE_LINE1 = '';
      const MOBILE_LINE2 = 'AI Without Limits';
      const isMobile = window.matchMedia('(max-width: 767px)').matches;

      // Prepare hero: replace title with a wrapper containing the logo (and optional glow)
      titleEl.innerHTML = '';
      const wrapSpan = document.createElement('span');
      wrapSpan.className = 'hero-logo-wrap';
      titleEl.appendChild(wrapSpan);

      // Optional glow behind the logo (Apple-like), controlled by OC_HERO_GLOW
      const glowCfg = window.OC_HERO_GLOW || {};
      if (glowCfg.enabled) {
        const glow = document.createElement('span');
        glow.className = 'hero-logo-glow' + (glowCfg.pulse ? ' glow-pulse' : '');
        glow.style.setProperty('--glow-c1', String(glowCfg.color1 || 'rgba(0,207,255,.40)'));
        glow.style.setProperty('--glow-c2', String(glowCfg.color2 || 'rgba(14,111,92,.28)'));
        glow.style.setProperty('--glow-opacity', String(glowCfg.opacity ?? 0.55));
        glow.style.setProperty('--glow-blur', ((glowCfg.blurPx ?? 30)|0) + 'px');
        glow.style.setProperty('--glow-pulse-dur', String(glowCfg.pulseDur || '6s'));
        const inset = Math.max(0, Math.min(40, (glowCfg.insetPct ?? 16))) + '%';
        glow.style.inset = `-${inset}`;
        wrapSpan.appendChild(glow);
      }

      const logoSpanNow = document.createElement('span');
      logoSpanNow.className = 'hero-logo-white';
      logoSpanNow.setAttribute('role','img');
      logoSpanNow.setAttribute('aria-label','ONX');
      wrapSpan.appendChild(logoSpanNow);

      if (prefersReduced) {
        // Reduced motion: static line(s), reveal CTA (no animation)
        if (sub1El) {
          if (isMobile) {
            sub1El.innerHTML = `
              <span class="hero-line1">${MOBILE_LINE1}</span>
              <span class="hero-line2">${MOBILE_LINE2}</span>`;
          } else {
            sub1El.innerHTML = `<span class="hero-line1">${TAGLINE_FULL}</span>`;
          }
        }
        ctaBtn.classList.add('cta-visible');
        document.dispatchEvent(new Event('oc:cta-text-done'));
        return;
      }

      // Prepare for typing
      if (sub1El) sub1El.textContent = '';
      ctaTxt.textContent = '';
      ctaBtn.classList.remove('cta-visible');

      // local speed helpers honoring OC_HERO.streamSpeed
      function spH(ms){
        const f = (typeof cfg.streamSpeed === 'number' && cfg.streamSpeed > 0) ? cfg.streamSpeed : 1.0;
        return ms * f;
      }
      function typeHero(el, text, min, max){
        return new Promise(resolve=>{
          let i=0;
          const tn = document.createTextNode('');
          el.textContent = '';
          el.appendChild(tn);
          (function tick(){
            tn.textContent = text.slice(0, ++i);
            if (i <= text.length) setTimeout(tick, spH(rand(min,max)));
            else resolve();
          })();
        });
      }
      const wait = (ms)=> new Promise(r=>setTimeout(r, ms));

      function afterTransition(el, fallbackMs = 900){
        return new Promise((resolve)=>{
          let done = false;
          const finish = ()=>{ if (done) return; done = true; resolve(); };
          const onEnd = (e)=>{ if (e.target === el) finish(); };
          el.addEventListener('transitionend', onEnd, { once: true });
          setTimeout(()=>{ el.removeEventListener('transitionend', onEnd); finish(); }, fallbackMs);
        });
      }
      async function run(){
        await wait(Math.max(0, cfg.startDelayMs|0));
        // Type the tagline: two-line on mobile, single shimmering line on desktop
        if (sub1El){
          const min = (cfg.line1CharMin ?? cfg.lineCharMin) | 0;
          const max = (cfg.line1CharMax ?? cfg.lineCharMax) | 0;
          if (isMobile) {
            sub1El.innerHTML = '<span class="hero-line1"><span class="seg-fullshine l1"></span></span>\
                                <span class="hero-line2"><span class="seg-fullshine l2"></span></span>';
            const l1 = sub1El.querySelector('.l1');
            const l2 = sub1El.querySelector('.l2');
            await typeHero(l1, MOBILE_LINE1, min, max);
            await typeHero(l2, MOBILE_LINE2, min, max);
          } else {
            sub1El.innerHTML = '<span class="hero-line1"><span class="seg-fullshine"></span></span>';
            const segFull = sub1El.querySelector('.seg-fullshine');
            await typeHero(segFull, TAGLINE_FULL, min, max);
          }
        }
        await wait(cfg.staggerMs|0);
        ctaBtn.classList.add('cta-visible');
        document.dispatchEvent(new Event('oc:cta-visible'));
        await afterTransition(ctaBtn, 900);
        await wait(60);
        document.dispatchEvent(new Event('oc:cta-text-start'));
        await typeHero(ctaTxt, bTxt, cfg.buttonCharMin|0, cfg.buttonCharMax|0);
        document.dispatchEvent(new Event('oc:cta-text-done'));
      }

      let started = false;
      let inView = !cfg.startOnView;
      let blurReady = !cfg.waitForBlur;

      function tryStart(){
        if (!started && inView && blurReady){
          started = true; run();
        }
      }

      if (cfg.startOnView){
        const ob = new IntersectionObserver((entries)=>{
          for (const e of entries){
            if (e.isIntersecting){
              inView = true; tryStart(); ob.disconnect();
            }
          }
        }, { threshold:.35 });
        ob.observe(hero);
      }

      if (cfg.waitForBlur){
        document.addEventListener('oc:page-blur-fade', () => { blurReady = true; tryStart(); }, { once:true });
      } else {
        blurReady = true; tryStart();
      }
    })();

    // ================================
    // Rotator moved to section below hero (#sly-4 .sly-sub)
    // ================================
    (function movedRotator(){
      const root = document.querySelector('#sly-4 .sly-sub');
      const rCfg = window.OC_HERO_ROTATOR || {};
      const cfg = window.OC_HERO || {};
      if (!root || !rCfg.words || !rCfg.words.length) return;

      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const prefix = rCfg.prefix || 'Your AI. For ';
      const words = rCfg.words.slice();

      function spH(ms){
        const f = (typeof cfg.streamSpeed === 'number' && cfg.streamSpeed > 0) ? cfg.streamSpeed : 1.0;
        return ms * f;
      }
      function wait(ms){ return new Promise(r=>setTimeout(r, ms)); }
      function rand(a,b){ return Math.floor(Math.random()*(b-a+1))+a; }
      function type(el, text, min, max){
        return new Promise(resolve=>{
          let i=0; el.textContent=''; const tn=document.createTextNode(''); el.appendChild(tn);
          (function tick(){ tn.textContent=text.slice(0, ++i); if(i<=text.length) setTimeout(tick, spH(rand(min,max))); else resolve(); })();
        });
      }
      function del(el, min, max){
        return new Promise(resolve=>{
          const step=()=>{ const t=el.textContent||''; if(!t.length){ resolve(); return; } el.textContent=t.slice(0,-1); setTimeout(step, spH(rand(min,max))); };
          step();
        });
      }

      // Build simple single-line structure
      root.innerHTML = '<span class="rot-prefix"></span><span class="hero-word"></span><span class="hero-caret" aria-hidden="true"></span>';
      // caret styling reuse
      root.style.setProperty('--caret-blink', (rCfg.caretBlinkMs||800) + 'ms');
      root.style.setProperty('--caret-w', (rCfg.caretWidthPx||2) + 'px');
      root.style.setProperty('--caret-color', rCfg.caretColor || 'rgba(0,0,0,.85)');

      const pEl = root.querySelector('.rot-prefix');
      const wEl = root.querySelector('.hero-word');

      async function run(){
        if (prefersReduced){
          root.textContent = prefix + words[0];
          return;
        }
        await type(pEl, prefix, cfg.lineCharMin|0 || 12, cfg.lineCharMax|0 || 18);
        await type(wEl, words[0], rCfg.typeMin|0 || 40, rCfg.typeMax|0 || 70);

        let i = 1 % words.length;
        (async function loop(){
          await wait(spH(rCfg.dwellMs|0 || 2000));
          await del(wEl, rCfg.deleteMin|0 || 20, rCfg.deleteMax|0 || 30);
          await type(wEl, words[i], rCfg.typeMin|0 || 40, rCfg.typeMax|0 || 70);
          i = (i + 1) % words.length;
          loop();
        })();
      }

      // Start when section comes into view
      const ob = new IntersectionObserver((entries)=>{
        for (const e of entries){ if (e.isIntersecting){ run(); ob.disconnect(); } }
      }, { threshold: .35 });
      ob.observe(document.getElementById('sly-4'));
    })();

    // ================================
    // SECTION TYPERS
    // ================================
    function makeSectionTyper(rootSel, titleSel, subSel, cfg){
      const root  = document.querySelector(rootSel);
      if (!root || !cfg?.enabled) return;

      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) return;

      const titleEl = root.querySelector(titleSel);
      const subEl   = root.querySelector(subSel);

      if (!titleEl && !subEl) return;

      const tText = titleEl ? (titleEl.textContent || '') : '';
      const sText = subEl   ? (subEl.textContent   || '') : '';

      if (titleEl) titleEl.textContent = '';
      if (subEl)   subEl.textContent   = '';

      function spLocal(ms){
        const f = (typeof cfg.streamSpeed === 'number' && cfg.streamSpeed > 0) ? cfg.streamSpeed : 1.0;
        return ms * f;
      }
      function typeLocal(el, text, min, max){
        return new Promise(resolve=>{
          let i=0;
          const tn = document.createTextNode('');
          el.appendChild(tn);
          (function tick(){
            tn.textContent = text.slice(0, ++i);
            if (i <= text.length) setTimeout(tick, spLocal(rand(min,max)));
            else resolve();
          })();
        });
      }
      const wait = (ms)=> new Promise(r=>setTimeout(r, ms));

      async function run(){
        await wait(Math.max(0, cfg.startDelayMs|0));
        if (titleEl) await typeLocal(titleEl, tText, cfg.titleCharMin|0, cfg.titleCharMax|0);
        if (subEl){ await wait(cfg.staggerMs|0); await typeLocal(subEl, sText, cfg.lineCharMin|0, cfg.lineCharMax|0); }
      }

      if (cfg.startOnView){
        let started = false;
        const ob = new IntersectionObserver((entries)=>{
          for (const e of entries){
            if (e.isIntersecting && !started){
              started = true;
              run();
              ob.disconnect();
            }
          }
        }, { threshold:.35 });
        ob.observe(root);
      } else {
        run();
      }
    }

    makeSectionTyper('#sly', '.sly-title', '.sly-sub', window.OC_SLY);
    makeSectionTyper('#sly-2', '.sly-title', '.sly-sub', window.OC_SLY);
    makeSectionTyper('#sly-3', '.sly-title', '.sly-sub', window.OC_SLY);
    // '#sly-4' now hosts the moved rotator; skip generic typer there
    makeSectionTyper('#tct', '.tct-title', '.tct-sub', window.OC_TCT);



    // ===== Apply BRAND logo paths to <img data-oc-brand> =====
    (function applyBrandLogos(){
      const map = window.OC_BRANDS || {};
      document.querySelectorAll('img[data-oc-brand]').forEach(img=>{
        const key = img.getAttribute('data-oc-brand');
        if (map[key]) img.src = map[key];
      });
    })();

    // ===== Set HERO CTA icon based on OS (Windows ⇄ macOS) =====
    (function setHeroCtaIcon(){
      const el = document.getElementById('heroCtaIcon');
      if (!el) return;
      const os = (window.OC_OS || '').toLowerCase();
      el.classList.remove('ph-download','ph-apple-logo','ph-windows-logo');
      if (os === 'windows'){
        el.classList.add('ph-windows-logo');
        el.setAttribute('title','Windows');
        el.setAttribute('aria-label','Windows');
      } else {
        el.classList.add('ph-apple-logo');
        el.setAttribute('title','macOS');
        el.setAttribute('aria-label','macOS');
      }
    })();

(() => {
  class OCDownArrow extends HTMLElement {
    static get observedAttributes() {
      return [
        'dir','size','thickness','alpha',
        'amp','bounce','breathe',
        'from','via','to'
      ];
    }
    constructor(){ super(); this.attachShadow({mode:'open'}); }
    connectedCallback(){ this.render(); }
    attributeChangedCallback(){ this.render(); }

    render(){
      const dir       = (this.getAttribute('dir') || 'down').toLowerCase();
      const size      = Math.max(8, parseInt(this.getAttribute('size') || '72', 10));
      const thickness = Math.max(1, parseFloat(this.getAttribute('thickness') || '7'));
      const alpha     = Math.min(1, Math.max(0, parseFloat(this.getAttribute('alpha') ?? '0.85')));
      const amp       = (this.getAttribute('amp') || '14%').trim();
      const bounceDur = (this.getAttribute('bounce') || '1.8s').trim();
      const breatheDur= (this.getAttribute('breathe') || '3.6s').trim();

      const from = this.getAttribute('from') || '#ffffff';
      const via  = this.getAttribute('via')  || from;
      const to   = this.getAttribute('to')   || from;

      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      const rotation = ({ right:0, down:90, left:180, up:-90 }[dir] ?? 90);
      const gid = 'grad_' + Math.random().toString(36).slice(2);

      const animateTag = reduce ? '' : `
        <animateTransform attributeName="gradientTransform"
                          type="translate"
                          from="0 -1" to="0 1"
                          dur="8s" repeatCount="indefinite" />`;

      this.shadowRoot.innerHTML = `
        <style>
          :host { display:inline-block; line-height:0; }
          .wrap {
            --amp: ${amp};
            opacity: ${alpha};
            will-change: transform, filter, opacity;
            ${reduce ? '' : `animation:
              oc-bounce ${bounceDur} ease-in-out infinite,
              oc-breathe ${breatheDur} ease-in-out infinite;`}
            backface-visibility: hidden; transform: translateZ(0);
          }

          @keyframes oc-bounce {
            0%, 100% { transform: translateY(0); }
            50%      { transform: translateY(var(--amp)); }
          }
          @keyframes oc-breathe {
            0%, 100% { filter: drop-shadow(0 2px 8px rgba(255,255,255,.22))
                             drop-shadow(0 10px 26px rgba(255,255,255,.15)); }
            50%      { filter: drop-shadow(0 6px 18px rgba(255,255,255,.40))
                             drop-shadow(0 16px 40px rgba(255,255,255,.22)); }
          }

          svg { width:${size}px; height:${size}px; overflow:visible; }
          .stroke {
            stroke: url(#${gid});
            stroke-width:${thickness};
            stroke-linecap: round;
            stroke-linejoin: round;
            fill: none;
          }
        </style>

        <div class="wrap" part="wrap" aria-hidden="true">
          <svg viewBox="0 0 64 64" role="img" aria-label="Down arrow" style="transform: rotate(${rotation}deg);">
            <defs>
              <linearGradient id="${gid}" x1="0" y1="0" x2="0" y2="1" gradientUnits="objectBoundingBox">
                <stop offset="0%"   stop-color="${from}" />
                <stop offset="50%"  stop-color="${via}" />
                <stop offset="100%" stop-color="${to}" />
                ${animateTag}
              </linearGradient>
            </defs>

            <path class="stroke" d="M12 32 H44" />
            <path class="stroke" d="M44 20 L56 32 L44 44" />
          </svg>
        </div>
      `;
    }
  }

  if (!customElements.get('oc-down-arrow')) {
    customElements.define('oc-down-arrow', OCDownArrow);
  }
})();
  </script>






<!-- ── Tipsy: minimal Apple-style organic motion (drop-in) ── -->
<style>
  .tipsy{
    /* Default controls (overridable per-element via data-*) */
    --amp: 12px;         /* float amplitude (px) */
    --rot: 0.35deg;     /* rotation amplitude */
    --scale: 0.008;     /* scale amplitude (0.008 = 0.8%) */
    --speed: 8s;       /* seconds per cycle */
    --hover: 1;       /* hover response strength (0..1) */
    --ease: cubic-bezier(.22,.61,.36,1); /* Apple-ish ease */

    will-change: transform;
    backface-visibility: hidden;
    transform-style: preserve-3d;
    transition: transform 320ms var(--ease), filter 320ms var(--ease);
  }
  /* Slight polish on hover/focus */
  .tipsy:where(:hover,:focus-within){
    filter: saturate(1.02) contrast(1.02);
  }

  /* Respect reduced motion: keep only a gentle hover tilt */
  @media (prefers-reduced-motion: reduce){
    .tipsy{ transition-duration: 160ms; }
    .tipsy[data-tipsy-animated="0"]{ transform: none !important; }
  }
</style>

<script>
(() => {
  const els = Array.from(document.querySelectorAll('.tipsy'));
  if (!els.length) return;

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // Global defaults (can be tuned once for your whole site)
  const DEFAULTS = {
    amp: 6,          // px vertical float
    rot: 0.35,       // deg rotation amplitude
    scale: 0.008,    // 0.8% scale pulsing
    speed: 10,       // seconds per cycle
    hover: 0.6       // 0..1 hover influence
  };

  // Per element state
  const S = new WeakMap();

  // Helper: read number from data-* with fallback
  const num = (el, name, fallback) => {
    const v = el.dataset[name];
    return (v === undefined || v === '') ? fallback : Number(v);
  };

  // Initialize elements
  els.forEach((el, i) => {
    // Per-element controls (override via data-amp, data-rot, data-scale, data-speed, data-hover)
    const amp   = num(el, 'amp',   DEFAULTS.amp);     // px
    const rot   = num(el, 'rot',   DEFAULTS.rot);     // deg
    const scale = num(el, 'scale', DEFAULTS.scale);   // unitless
    const speed = num(el, 'speed', DEFAULTS.speed);   // seconds
    const hover = num(el, 'hover', DEFAULTS.hover);   // 0..1

    // Randomize phase so elements don't sync
    const phase = Math.random() * Math.PI * 2;
    // Slight speed variance for organic feel
    const spVar = speed * (0.9 + Math.random() * 0.2);

    // Hover targets eased over time
    const hoverState = { tx: 0, ty: 0, tRot: 0, tScale: 0, k: hover };

    // Pointer tracking for hover tilt
    let rect = null;
    const onEnter = () => { rect = el.getBoundingClientRect(); };
    const onMove = (e) => {
      if (!rect) rect = el.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;   // 0..1
      const y = (e.clientY - rect.top)  / rect.height;  // 0..1
      // Centered -0.5..0.5
      const cx = x - 0.5, cy = y - 0.5;
      // Modest hover offsets
      hoverState.tx   = cx * amp * 0.4 * hoverState.k;         // px
      hoverState.ty   = cy * amp * 0.4 * hoverState.k;         // px
      hoverState.tRot = -cx * rot * 0.8 * hoverState.k;        // deg
      hoverState.tScale = Math.max(0, (0.5 - Math.hypot(cx,cy))) * scale * 1.2 * hoverState.k;
    };
    const onLeave = () => {
      rect = null;
      hoverState.tx = hoverState.ty = hoverState.tRot = hoverState.tScale = 0;
    };

    el.addEventListener('pointerenter', onEnter);
    el.addEventListener('pointermove',  onMove);
    el.addEventListener('pointerleave', onLeave);

    S.set(el, {
      amp, rot, scale, speed: spVar, phase,
      hover: hoverState,
      live: false,      // becomes true when in-view
      t: 0,             // time accumulator
      ex: 0, ey: 0, erot: 0, esc: 0 // eased hover offsets
    });
  });

  // Only animate when on screen
  const io = new IntersectionObserver((entries) => {
    entries.forEach(({isIntersecting, target}) => {
      const st = S.get(target);
      if (!st) return;
      st.live = isIntersecting;
      target.dataset.tipsyAnimated = prefersReduced ? '0' : (isIntersecting ? '1' : '0');
    });
  }, { root: null, rootMargin: '20% 0px', threshold: 0 });

  els.forEach(el => io.observe(el));

  // RAF loop
  let last = performance.now();
  function tick(now){
    const dt = Math.min(0.05, (now - last) / 1000); // clamp dt
    last = now;

    els.forEach(el => {
      const st = S.get(el); if (!st) return;

      // Ease hover offsets toward targets
      const ease = 1 - Math.pow(0.08, dt * 60); // framerate independent
      st.ex   += (st.hover.tx   - st.ex)   * ease;
      st.ey   += (st.hover.ty   - st.ey)   * ease;
      st.erot += (st.hover.tRot - st.erot) * ease;
      st.esc  += (st.hover.tScale - st.esc)* ease;

      if (!prefersReduced && st.live){
        st.t += dt;
        const w = (st.t + st.phase) * (Math.PI * 2 / st.speed);
        // Organic multi-sine blend (very subtle)
        const s1 = Math.sin(w);
        const s2 = Math.sin(w * 0.5 + 0.7);
        const s3 = Math.sin(w * 0.23 + 1.3);
        const blend = (s1*0.62 + s2*0.28 + s3*0.10);

        const y    = blend * st.amp;
        const rdeg = blend * st.rot;
        const scl  = 1 + blend * st.scale;

        // Compose base float + eased hover offsets
        const ty = y + st.ey;
        const rot = rdeg + st.erot;
        const sc  = scl + st.esc;

        el.style.transform = `translate3d(${st.ex.toFixed(2)}px, ${ty.toFixed(2)}px, 0) rotate(${rot.toFixed(3)}deg) scale(${sc.toFixed(4)})`;
      } else {
        // Reduced motion: only react gently to hover
        el.style.transform = `translate3d(${st.ex.toFixed(2)}px, ${st.ey.toFixed(2)}px, 0) rotate(${st.erot.toFixed(3)}deg)`;
      }
    });

    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
