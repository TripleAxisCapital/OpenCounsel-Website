<!doctype html>
<html lang="en">
<head>
  <!-- ─────────────────────────────────────────────────────────────────────────────
       Minimal, production-ready head for a clean, OpenAI-style start page
       ───────────────────────────────────────────────────────────────────────────── -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ONX — What can I help with?</title>
  <meta name="description" content="A fast, clean chat entry with ONX." />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#ffffff" />

  <!-- Favicons (adjust paths if needed) -->
  <link rel="icon" href="/logo.svg" type="image/svg+xml" sizes="any" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- Inter (system-ui fallback keeps CLS low) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet" />

  <!-- Your custom header component -->
  <script type="module" src="/assets/onx-header.js"></script>

  <!-- ─────────────────────────────────────────────────────────────────────────────
       Base styles: small, robust, Apple-clean
       ───────────────────────────────────────────────────────────────────────────── -->
  <style>
    :root{
      --ink: #0B0B0C;
      --muted: #7A7F86;
      --line: rgba(0,0,0,.10);
      --bg: #ffffff;

      /* Chat field sizing tokens */
      --chat-w: min(880px, 92vw);
      --chat-h: 72px;
      --chat-r: 24px;
      --pad-x: clamp(14px, 2.2vw, 22px);

      /* Brand image height (auto width via viewBox) */
      --brand-h: 28px;
    }
    @media (max-width: 640px){
      :root{ --brand-h: 24px; }
    }

    html, body { height: 100%; }
    html { color-scheme: light; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    /* Make sure the custom header occupies layout space */
    onx-header { display: block; }

    /* Main hero */
    .hero {
      min-height: clamp(520px, 76svh, 880px);
      display: grid;
      grid-template-rows: 1fr auto auto 1fr;
      align-items: center;
      justify-items: center;
      gap: 22px;
      padding: 24px var(--pad-x);
    }

    .title {
      grid-row: 2;
      margin: 0;
      font-weight: 700;
      letter-spacing: -0.01em;
      text-align: center;
      font-size: clamp(28px, 5.2vw, 40px);
    }

    /* Chat container */
    .chat { grid-row: 3; width: var(--chat-w); }
    .chat-form {
      position: relative;
      display: flex;
      align-items: center;
      height: var(--chat-h);
      border: 1px solid var(--line);
      border-radius: var(--chat-r);
      background: #fff;
      box-shadow:
        0 1px 0 rgba(0,0,0,.04),
        0 8px 28px rgba(0,0,0,.06);
      transition: box-shadow .2s ease, border-color .2s ease, transform .12s ease;
    }
    .chat-form:focus-within {
      border-color: rgba(0,0,0,.14);
      box-shadow:
        0 1px 0 rgba(0,0,0,.05),
        0 12px 36px rgba(0,0,0,.10);
      transform: translateY(-1px);
    }

    .chat-input {
      appearance: none;
      border: 0;
      background: transparent;
      width: 100%;
      height: 100%;
      font-size: clamp(16px, 2.6vw, 20px);
      padding: 0 calc(var(--pad-x) + 54px) 0 var(--pad-x);
      color: var(--ink);
      outline: none;
    }
    .chat-input::placeholder { color: #b6bac1; }

    .send {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      height: 46px;
      width: 46px;
      border: 0;
      border-radius: 999px;
      background: #111;
      color: #fff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform .08s ease, box-shadow .18s ease, background .18s ease, opacity .2s ease;
    }
    .send:hover { transform: translateY(-50%) translateY(-1px); box-shadow: 0 8px 20px rgba(0,0,0,.18); }
    .send:active { transform: translateY(-50%) translateY(0); }
    .send[disabled] { opacity: .6; cursor: not-allowed; box-shadow: none; }

    /* Suggestion pills (purely presentational) */
    .pills {
      margin-top: 16px;
      display: grid;
      grid-auto-flow: column;
      gap: 10px;
      align-items: center;
      justify-content: center;
      overflow-x: auto;
      padding-bottom: 4px;
    }
    .pill {
      white-space: nowrap;
      font-size: 14px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid var(--line);
      color: #111;
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,.04);
      user-select: none;
    }

    /* Brand mount areas: any SVG slotted here scales by --brand-h */
    .brand-mount svg, .brand-mount img {
      display: block;
      height: var(--brand-h);
      width: auto;
    }

    /* Fallback brand overlay if your header doesn't support slot="brand" */
    #onx-brand-overlay {
      position: absolute;
      left: 18px; top: 0; bottom: 0;
      display: none;                /* JS toggles if needed */
      align-items: center;
      pointer-events: none;
    }

    @media (prefers-reduced-motion: reduce) {
      .send, .chat-form { transition: none !important; }
    }
  </style>

  <!-- ─────────────────────────────────────────────────────────────────────────────
       EDIT ONE VARIABLE: choose inline SVG templates or external URLs
       - Use template IDs starting with '#' (default below), OR replace with URLs
         e.g., window.ONX_HEADER_LOGO = { static:'/icons/ONX.svg', pill:'/icons/O.svg' };
       ───────────────────────────────────────────────────────────────────────────── -->
  <script>
    window.ONX_HEADER_LOGO = { static: '/onxlogo.svg', pill: '/logo.svg' };
  </script>
</head>
<body>

  <!--
    Your custom header.
    We provide an explicit brand slot. If your component doesn't expose "brand",
    a small overlay fallback is enabled automatically (keeps the swap reliable).
  -->
  <onx-header id="siteHeader" threshold="8">
    <span slot="brand" class="brand-mount" id="brandSlotMount" aria-label="ONX brand"></span>
  </onx-header>

  <!-- Fallback brand overlay (used only if slot isn't honored by the component) -->
  <div id="onx-brand-overlay"><span class="brand-mount" id="brandOverlayMount"></span></div>

  <!-- Main hero -->
  <main class="hero" role="main">
    <h1 class="title">What can I help with?</h1>

    <section class="chat" aria-label="Chat input">
      <form class="chat-form" id="chatForm" action="javascript:;" novalidate>
        <input
          id="chatInput"
          class="chat-input"
          type="text"
          name="q"
          autocomplete="off"
          spellcheck="true"
          placeholder="Explain this code"
          aria-label="Ask ONX anything"
        />
        <button class="send" id="sendBtn" type="submit" aria-label="Send">
          <!-- simple up-arrow icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 4l7 7m0 0l-7 7m7-7H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </form>

      <!-- Editable suggestion pills (purely presentational) -->
      <div class="pills" aria-hidden="true">
        <span class="pill">Search with ONX</span>
        <span class="pill">Talk with ONX</span>
        <span class="pill">Research</span>
        <span class="pill">Sora</span>
        <span class="pill">More</span>
      </div>
    </section>
  </main>

  <!-- ─────────────────────────────────────────────────────────────────────────────
       Inline SVG templates (vector, crisp at any size)
       - Replace these with your real brand art anytime. Keep the IDs.
       - Stroke uses currentColor so it inherits your header text color.
       ───────────────────────────────────────────────────────────────────────────── -->
  <template id="svg-onx">
    <!-- ONX wordmark (geometric; tweak as needed) -->
    <svg viewBox="0 0 160 32" role="img" aria-label="ONX">
      <g fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round" stroke-linejoin="round">
        <!-- O -->
        <circle cx="20" cy="16" r="10.5"></circle>
        <!-- N -->
        <path d="M48 26 V6 M48 6 L78 26 M78 26 V6"></path>
        <!-- X -->
        <path d="M99 26 L123 6 M123 26 L99 6"></path>
      </g>
    </svg>
  </template>

  <template id="svg-o">
    <!-- O glyph -->
    <svg viewBox="0 0 32 32" role="img" aria-label="O">
      <circle cx="16" cy="16" r="11" fill="none" stroke="currentColor" stroke-width="3.2"></circle>
    </svg>
  </template>

  <!-- ─────────────────────────────────────────────────────────────────────────────
       Behavior: typing effect + header brand swap (SVG images, not text)
       ───────────────────────────────────────────────────────────────────────────── -->
  <script>
    (function(){
      /* =========================
         1) Typing placeholder loop
         ========================= */
      const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const input = document.getElementById('chatInput');

      const prompts = [
        "Explain this code",
        "Summarize this article",
        "Write a friendly follow-up email",
        "Make a quick plan for tomorrow",
        "Find pros & cons for this decision"
      ];

      if (!prefersReduced) {
        let i = 0;
        const typeSpeed = 38;     // ms per char
        const holdMs    = 1100;   // ms holding full text
        const eraseSpeed= 24;

        async function type(text){
          input.setAttribute('placeholder', '');
          for(let k=1;k<=text.length;k++){
            input.setAttribute('placeholder', text.slice(0,k));
            await new Promise(r=>setTimeout(r,typeSpeed));
          }
        }
        async function erase(text){
          for(let k=text.length;k>=0;k--){
            input.setAttribute('placeholder', text.slice(0,k));
            await new Promise(r=>setTimeout(r,eraseSpeed));
          }
        }
        (async function loop(){
          while(document.body){
            const text = prompts[i % prompts.length];
            await type(text);
            await new Promise(r=>setTimeout(r,holdMs));
            await erase(text);
            i++;
          }
        })();
      }

      /* =========================
         2) Chat form submit (stub)
         ========================= */
      const form = document.getElementById('chatForm');
      const sendBtn = document.getElementById('sendBtn');
      form.addEventListener('submit', (e)=>{
        e.preventDefault();
        const v = input.value.trim();
        if(!v) return;
        sendBtn.disabled = true;
        // TODO: hook this to your app. For now we just clear and re-enable.
        setTimeout(()=>{
          input.value = "";
          sendBtn.disabled = false;
          input.focus();
        }, 250);
      });

      /* ==========================================================
         3) Header brand swap (SVG image → SVG image)
            ONE VARIABLE to edit: window.ONX_HEADER_LOGO
            - If value starts with "#", it clones an inline <template>.
            - Otherwise it's treated as a URL to a .svg file.
         ========================================================== */
      const headerEl = document.getElementById('siteHeader');
      const slotMount = document.getElementById('brandSlotMount');
      const overlay   = document.getElementById('onx-brand-overlay');
      const overlayMount = document.getElementById('brandOverlayMount');
      const LOGO = (window.ONX_HEADER_LOGO || {static:'#svg-onx', pill:'#svg-o'});
      const THRESH = Number(headerEl.getAttribute('threshold') || 8);

      function nodeFromSpec(spec, altLabel){
        if (typeof spec === 'string' && spec.startsWith('#')) {
          const tpl = document.querySelector(spec);
          if (tpl && tpl.content && tpl.content.firstElementChild) {
            const clone = tpl.content.firstElementChild.cloneNode(true);
            clone.setAttribute('aria-label', altLabel || '');
            return clone;
          }
        }
        if (typeof spec === 'string') {
          const img = new Image();
          img.decoding = 'async';
          img.loading = 'eager';
          img.referrerPolicy = 'no-referrer';
          img.src = spec;
          img.alt = altLabel || '';
          return img;
        }
        return document.createElement('span'); // should never happen
      }

      function clearAndAppend(mount, child){
        while (mount.firstChild) mount.removeChild(mount.firstChild);
        mount.appendChild(child);
      }

      // Determine whether the brand slot is actually visible in your component.
      function ensureOverlayFallback(){
        const slotVisible = slotMount && slotMount.offsetParent !== null;
        if (!slotVisible) {
          headerEl.style.position = 'relative';
          overlay.style.display = 'flex';
        }
      }

      // Build both variants up-front (prevents layout flash on swap)
      const svgStatic = nodeFromSpec(LOGO.static, 'ONX');
      const svgPill   = nodeFromSpec(LOGO.pill,   'O');
      clearAndAppend(slotMount, svgStatic.cloneNode(true));
      clearAndAppend(overlayMount, svgStatic.cloneNode(true));

      function updateBrand(){
        const pill = window.scrollY > THRESH;
        const chosen = pill ? svgPill : svgStatic;
        // Replace in both mounts (overlay may be hidden; harmless to update)
        clearAndAppend(slotMount, chosen.cloneNode(true));
        clearAndAppend(overlayMount, chosen.cloneNode(true));
      }

      // Initialize + wire events
      customElements.whenDefined('onx-header').then(ensureOverlayFallback);
      requestAnimationFrame(ensureOverlayFallback);
      updateBrand();
      window.addEventListener('scroll', updateBrand, { passive: true });
      window.addEventListener('resize', updateBrand, { passive: true });
    })();
  </script>
</body>
</html>
